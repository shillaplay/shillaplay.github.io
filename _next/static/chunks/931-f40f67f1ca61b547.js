"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{46782:function(t,e,n){var r=n(35666),o=n.n(r),a=n(85893),c=n(92667),u=n(20949),s=n(98379),i=n(68527),l=n(26723),f=n(14382),p=n(83897),d=n(36951),m=n(81961),v=n(94045),h=n(38188),k=n(20149),S=n(82138),g=n(67294),x=n(57060),b=n(77044),y=n(80109),w=n(90387),O=n(86455),j=n.n(O),_=(n(37911),n(55154)),E=n(16813),C=n(98450);function P(t,e,n,r,o,a,c){try{var u=t[a](c),s=u.value}catch(i){return void n(i)}u.done?e(s):Promise.resolve(s).then(r,o)}function A(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){P(a,r,o,c,u,"next",t)}function u(t){P(a,r,o,c,u,"throw",t)}c(void 0)}))}}function T(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Z(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,o=!1,a=void 0;try{for(var c,u=t[Symbol.iterator]();!(r=(c=u.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(s){o=!0,a=s}finally{try{r||null==u.return||u.return()}finally{if(o)throw a}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function J(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var N,W={"common:connect-wallet":"normal",0:"normal",1:"italic"};e.Z=function(t){var e=t.usePriceSlider,n=t.isOpen,r=t.onClose,O=t.address,P=(t.tokenAddress,t.abi),H=t.title,D=t.placeholder,R=t.helperText,$=t.info,I=t.onComplete,z=t.okMessage,F=t.notOkMessage,L=t.onValue,M=t.executeText,B=t.executingText,G=(0,S.Z)("vault"),Q=G.t,X=G.lang,q=(0,c.pm)(),V=((0,w.useRouter)(),(0,b.Ge)().account),K=(0,x.Z)().onOpen,U=(0,h.cq)(O,P),Y=(0,g.useState)(),tt=Y[0],et=Y[1],nt=function(){return V?tt?"1":"0":"common:connect-wallet"},rt=(0,g.useState)(nt()),ot=rt[0],at=rt[1],ct=(0,g.useState)(),ut=ct[0],st=ct[1],it=(0,g.useState)(""),lt=it[0],ft=it[1],pt=(0,g.useState)(0),dt=pt[0],mt=pt[1],vt=function(t){et(!1),I?I(t):j().fire({html:z?z(t):"Contract test ok",icon:"success",cancelButtonText:Q("common:ok"),confirmButtonText:Q("common:ok")})},ht=(0,g.useState)(),kt=ht[0],St=ht[1],gt=((0,y.k)(kt,vt,(function(t){ft(F?F(t):"Contract test failed"),et(!1)})),function(t){var e=t.code;console.log("Stake.error",e,t),et(!1),e!=m.O1.META_MASK_TX_DECLINED?q({description:Q("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):q({description:Q("common:tx-declined"),status:"error",duration:4e3,isClosable:!0})}),xt=A(o().mark((function t(){var e,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,!ut){t.next=8;break}return t.next=5,(e=U)[ut.func].apply(e,J(ut.args));case 5:n=t.sent,t.next=11;break;case 8:return t.next=10,U[ut.func]();case 10:n=t.sent;case 11:console.log("Staked.result",n),ut.readOnly?vt(n):St(n.hash),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),gt(t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])}))),bt=(0,k.mM)(),yt=bt.balance,wt=(bt.fetchStatus,(0,k.Yl)()),Ot=wt.allowance,jt=(wt.fetchStatusAllowance,(0,g.useState)(E.HW)),_t=jt[0],Et=jt[1],Ct=Z((0,k.A$)(_t,C.address),3),Pt=(Ct[0],Ct[1],Ct[2]);(0,g.useEffect)((function(){Pt&&(gt(Pt),Et(E.HW))}),[Pt]),(0,g.useEffect)((function(){at(nt())}),[V,tt]),(0,g.useEffect)((function(){_t.gt(0)&&_t.lte(Ot)&&(xt(_t),Et(E.HW))}),[_t,Ot]);var At=A(o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(tt||lt.length>0)){t.next=2;break}return t.abrupt("return");case 2:ut&&parseInt(ut.pay)>(0,v.aQ)(Ot)?j().fire({text:Q("common:approve-text-vault"),icon:"info",confirmButtonText:Q("common:ok")}).then((function(t){t.isConfirmed&&(et(!0),Et((0,v.kz)(ut.pay)))})):(et(!0),xt(ut));case 3:case"end":return t.stop()}}),t)}))),Tt=(0,u.ff)("colorAccent.light","colorAccent.dark"),Zt=function(t){var e={func:null,pay:0,args:[]},n=((t||"")+"").split(":");1==n.length?(e.func=n[0].trim(),n=[]):2==n.length||3==n.length?2==n.length?(e.func=n[0].trim(),n=n[1].split(",")):(e.readOnly=!0,e.func=n[1].trim(),n=n[2].split(",")):(n=[],e.func=null);for(var r=0;r<n.length;r++){var o=n[r].split(".");console.log("Parsed:0",r,o),o[0]&&o[1]&&("pay"==o[1].toLowerCase()?(e.pay+=parseInt(o[0]),e.args.push((0,v.kz)(o[0]).toString())):e.args.push(o[0]))}return console.log("Parsed:1",e),e.func?e:null},Jt=(0,g.useState)(),Nt=Jt[0],Wt=Jt[1],Ht=function(t){if(Wt(t),ft(""),L){var e=L("".concat(t));e.error?ft(e.error):e.input&&st(Zt(e.input))}else st(Zt(t))};(0,g.useEffect)((function(){if(e&&(0,v.aQ)(yt).gt(E.HW)&&dt>0){var t=Math.round((0,v.aQ)(yt).toNumber()*dt/100);Ht(t),mt(0)}}),[yt,dt]);return(0,a.jsxs)(s.u_,{isOpen:n,onClose:r,closeOnOverlayClick:!1,children:[(0,a.jsx)(s.ZA,{}),(0,a.jsxs)(s.hz,(N={borderRadius:"32px",w:"auto"},T(N,"w",{base:"95%",md:"650px"}),T(N,"children",[(0,a.jsx)(s.xB,{w:"100%",d:"flex",justifyContent:"flex-end",children:(0,a.jsx)(i.xu,{as:_.aHS,onClick:r,cursor:"pointer",display:"italic"==W[ot]?"none":"block",children:Q("common:cancel")})}),(0,a.jsx)(s.fe,{children:(0,a.jsxs)(i.gC,{children:[(0,a.jsx)(f.Z,{okText:Q("common:ok"),mb:4,value:Nt,onChange:function(t){Ht(t.target.value)},title:H||"Enter Contract Arguments",paceholder:D||"funcName:arg1.type,arg2.type",errorMessage:lt,helperText:R||'Click the "what is this" button to learn how.',infoText:Q("common:info-text"),info:$||"Argument must be in the format: funcName:arg1.type,arg2.type. Types are: pay => which indicates the amount of token the contract will spend, the order types are the standard solifity types. Like uint256, address,... Example: stake:100.pay,1.uint256 means stake 100 of tokens(which requires the contract spending 100 tokens) at the vault with ID of 1"}),(0,a.jsx)(i.xv,{as:"div",textAlign:"center",children:Q("common:value-symbol",[(0,a.jsx)("b",{children:p.Z.format((0,v.Xv)(yt),{locale:X,minFD:2,maxFD:2})})])}),e?(0,a.jsx)(d.Z,{defaultValue:5,updateOnLoad:!0,percentages:[25,75,50],onChangeEnd:function(t){mt(t)}}):null]})}),(0,a.jsx)(s.mz,{children:(0,a.jsx)(i.Ug,{w:"100%",justifyContent:"flex-end",alignItems:"center",children:(0,a.jsx)(l.zx,{onClick:function(){V?At():K()},ml:"25px",disabled:"italic"==W[ot]||!(null===ut||void 0===ut?void 0:ut.func),fontStyle:(null===ut||void 0===ut?void 0:ut.func)?W[ot]:"italic",bg:Tt,borderColor:Tt,color:"#fff",textTransform:"capitalize",_hover:{opacity:.4},_disabled:{opacity:.4,cursor:"not-allowed"},children:"common:connect-wallet"==ot?Q(ot):(null===ut||void 0===ut?void 0:ut.func)?"0"==ot?M||"Execute ".concat(ut.func):B||"Executing ".concat(ut.func,"..."):M||"Waiting for command..."})})})]),N))]})}},49920:function(t,e,n){n.d(e,{Z:function(){return u}});var r=n(85893),o=n(68527);function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function c(t,e){if(null==t)return{};var n,r,o=function(t,e){if(null==t)return{};var n,r,o={},a=Object.keys(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||(o[n]=t[n]);return o}(t,e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(t);for(r=0;r<a.length;r++)n=a[r],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(o[n]=t[n])}return o}function u(t){var e=t.children,n=t.className,u=c(t,["children","className"]);return(0,r.jsx)(o.kC,function(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){a(t,e,n[e])}))}return t}({className:"columns is-multiline ".concat(n||"")},u,{children:e}))}},59521:function(t,e,n){n.d(e,{sj:function(){return g},$x:function(){return x},xL:function(){return b},ZX:function(){return y},e9:function(){return w}});var r=n(35666),o=n.n(r),a=n(67294),c=n(2593),u=n(35553),s=n(16813),i=n(81961),l=n(94045),f=n(38188),p=n(37423),d=n(85480);function m(t,e,n,r,o,a,c){try{var u=t[a](c),s=u.value}catch(i){return void n(i)}u.done?e(s):Promise.resolve(s).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var a=t.apply(e,n);function c(t){m(a,r,o,c,u,"next",t)}function u(t){m(a,r,o,c,u,"throw",t)}c(void 0)}))}}function h(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function k(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable})))),r.forEach((function(e){h(t,e,n[e])}))}return t}var S={1:"3_day",2:"1_week",3:"2_week",4:"1_month",5:"2_month",6:"3_month"},g=function(t){var e=i.J_.pending,n=i.J_.ok,r=i.J_.notOk,s=(0,a.useState)({locks:[],locksStatus:e}),d=s[0],m=s[1],h=(0,f.GF)(),g=(0,a.useState)((0,l.bW)()),x=g[0],b=(g[1],(0,p.Z)(x,"useLockz4")),y=(0,a.useState)((0,l.ep)()),w=y[0],O=(y[1],(0,p.Z)(w,"useLockz5")),j=(0,a.useState)((0,l.gj)()),_=j[0],E=(j[1],(0,p.Z)(_,"useLockz6"));return(0,a.useEffect)((function(){var e=v(o().mark((function e(){var a,s,f,p;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,a=[],s=0;case 3:if(!(s<t.length)){e.next=12;break}return e.next=6,h.getLock(t[s]);case 6:f=e.sent,p=c.O$.from(f.weight.toString()).toNumber()/c.O$.from(f.weightDivisor.toString()).toNumber(),a.push({id:t[s],unlockTimestampInterval:c.O$.from(f.unlockTimestampInterval.toString()).toNumber(),weight:p,tvl:(0,l.Xv)(f.deposits.toString()),profits:parseFloat(u.bM(c.O$.from(f.profitsApprox.toString()),i.r2+i.RF)),dividendPoints:c.O$.from(f.dividendPoints.toString()),dividendPointsNumDecimals:i.r2,rewardPercentage:100*p/t.length,tag:S[t[s]]});case 9:s++,e.next=3;break;case 12:m({locks:a,locksStatus:n}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),m((function(t){return k({},t,{locksStatus:r})}));case 18:case"end":return e.stop()}}),e,null,[[0,15]])})));h&&t.length>0&&e()}),[n,r,h,b,O,E]),d},x=function(t){var e=i.J_.pending,n=i.J_.ok,r=i.J_.notOk,u=(0,a.useState)({totalStakes:s.HW,totalStakesStatus:e}),m=u[0],h=u[1],S=(0,d.aQ)().account,g=(0,f.GF)(),x=(0,a.useState)(t||S?(0,l.ep)(t||S):null),b=x[0],y=x[1],w=(0,p.Z)(b);return(0,a.useEffect)((function(){(t||S)&&y((0,l.ep)(t||S))}),[S,t]),(0,a.useEffect)((function(){var a=v(o().mark((function e(){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.countStakedBy(t||S);case 3:a=e.sent,u=c.O$.from(a.toString()),h({totalStakes:u,totalStakesStatus:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h((function(t){return k({},t,{totalStakesStatus:r})}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));g&&(t||S)?a():h({totalStakes:s.HW,totalStakesStatus:e})}),[S,n,r,g,t,w]),m},b=function(t){var e=i.J_.pending,n=i.J_.ok,r=i.J_.notOk,u=(0,a.useState)({totalStaked:s.HW,totalStakedStatus:e}),m=u[0],h=u[1],S=(0,d.aQ)().account,g=(0,f.GF)(),x=(0,a.useState)(t||S?(0,l.ep)(t||S):null),b=x[0],y=x[1],w=(0,p.Z)(b);return(0,a.useEffect)((function(){(t||S)&&y((0,l.ep)(t||S))}),[S,t]),(0,a.useEffect)((function(){var a=v(o().mark((function e(){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.totalDepositsOf(t||S);case 3:a=e.sent,u=c.O$.from(a.toString()),h({totalStaked:u,totalStakedStatus:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h((function(t){return k({},t,{totalStakedStatus:r})}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));g&&(t||S)?a():h({totalStaked:s.HW,totalStakedStatus:e})}),[S,n,r,g,t,w]),m},y=function(t){var e=i.J_.pending,n=i.J_.ok,r=i.J_.notOk,u=(0,a.useState)({totalRewards:s.HW,totalRewardsStatus:e}),m=u[0],h=u[1],S=(0,d.aQ)().account,g=(0,f.GF)(),x=(0,a.useState)((0,l.gj)()),b=x[0],y=(x[1],(0,p.Z)(b)),w=(0,a.useState)(t||S?(0,l.ep)(t||S):null),O=w[0],j=w[1],_=(0,p.Z)(O);return(0,a.useEffect)((function(){(t||S)&&j((0,l.ep)(t||S))}),[S,t]),(0,a.useEffect)((function(){var a=v(o().mark((function e(){var a,u;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g.totalRewardsOfStakesBy(t||S);case 3:a=e.sent,u=c.O$.from(a.toString()),h({totalRewards:u,totalRewardsStatus:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h((function(t){return k({},t,{totalRewardsStatus:r})}));case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));g&&(t||S)?a():h({totalRewards:s.HW,totalRewardsStatus:e})}),[S,n,r,g,t,y,_]),m},w=function(t){var e=i.J_.pending,n=i.J_.ok,r=i.J_.notOk,u=(0,a.useState)({totalStaked:s.HW,totalStakedStatus:e}),d=u[0],m=u[1],h=(0,f.GF)(),S=(0,a.useState)((0,l.ep)()),g=S[0],x=(S[1],(0,p.Z)(g));return(0,a.useEffect)((function(){var e=v(o().mark((function t(){var e,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,h.totalDeposits();case 3:e=t.sent,a=c.O$.from(e.toString()),m({totalStaked:a,totalStakedStatus:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),m((function(t){return k({},t,{totalStakedStatus:r})}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));!h||t&&d.totalStakedStatus==n||e()}),[n,r,h,x]),d}}}]);