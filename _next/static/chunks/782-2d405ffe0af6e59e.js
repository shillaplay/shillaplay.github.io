"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[782],{46782:function(e,n,t){var o=t(35666),r=t.n(o),a=t(85893),c=t(92667),i=t(20949),s=t(98379),u=t(68527),l=t(26723),f=t(14382),d=t(83897),p=t(36951),m=t(81961),h=t(94045),x=t(17618),g=t(20149),v=t(82138),y=t(67294),b=t(57060),k=t(77044),w=t(80109),j=t(90387),S=t(86455),C=t.n(S),E=(t(37911),t(55154)),A=t(16813);t(98450);function T(e,n,t,o,r,a,c){try{var i=e[a](c),s=i.value}catch(u){return void t(u)}i.done?n(s):Promise.resolve(s).then(o,r)}function O(e){return function(){var n=this,t=arguments;return new Promise((function(o,r){var a=e.apply(n,t);function c(e){T(a,o,r,c,i,"next",e)}function i(e){T(a,o,r,c,i,"throw",e)}c(void 0)}))}}function z(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],o=!0,r=!1,a=void 0;try{for(var c,i=e[Symbol.iterator]();!(o=(c=i.next()).done)&&(t.push(c.value),!n||t.length!==n);o=!0);}catch(s){r=!0,a=s}finally{try{o||null==i.return||i.return()}finally{if(r)throw a}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function M(e){return function(e){if(Array.isArray(e)){for(var n=0,t=new Array(e.length);n<e.length;n++)t[n]=e[n];return t}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var _={"common:connect-wallet":"normal",0:"normal",1:"italic"};n.Z=function(e){var n=e.usePriceSlider,t=e.isOpen,o=e.onClose,S=e.address,T=(e.tokenAddress,e.abi),H=e.title,W=e.placeholder,Z=e.helperText,I=e.info,D=e.onComplete,L=e.okMessage,N=e.notOkMessage,P=e.onValue,R=e.executeText,B=e.executingText,V=(e.onResult,(0,v.Z)("vault")),F=V.t,Q=V.lang,q=(0,c.pm)(),U=((0,j.useRouter)(),(0,k.Ge)().account),X=(0,b.Z)().onOpen,G=(0,x.cq)(S,T),K=(0,y.useState)(),$=K[0],J=K[1],Y=function(){return U?$?"1":"0":"common:connect-wallet"},ee=(0,y.useState)(Y()),ne=ee[0],te=ee[1],oe=(0,y.useState)(),re=oe[0],ae=oe[1],ce=(0,y.useState)(""),ie=ce[0],se=ce[1],ue=(0,y.useState)(0),le=ue[0],fe=ue[1],de=function(e){J(!1),D&&D(e),C().fire({html:L?L(e):"Contract test ok",icon:"success",cancelButtonText:F("common:ok"),confirmButtonText:F("common:ok")})},pe=(0,y.useState)(),me=pe[0],he=pe[1],xe=((0,w.k)(me,de,(function(e){se(N?N(e):"Contract test failed"),J(!1)})),function(e){var n=e.code;console.log("Stake.error",n,e),J(!1),n!=m.O1.META_MASK_TX_DECLINED?q({description:F("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):q({description:F("common:tx-declined"),status:"error",duration:4e3,isClosable:!0})}),ge=O(r().mark((function e(){var n,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!re){e.next=8;break}return e.next=5,(n=G)[re.func].apply(n,M(re.args));case 5:t=e.sent,e.next=11;break;case 8:return e.next=10,G[re.func]();case 10:t=e.sent;case 11:console.log("Staked.result",t),re.readOnly?de(t):he(t.hash),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(0),xe(e.t0);case 18:case"end":return e.stop()}}),e,null,[[0,15]])}))),ve=(0,g.mM)(),ye=ve.balance,be=(ve.fetchStatus,(0,g.Fx)(S)),ke=be.allowance,we=(be.fetchStatusAllowance,(0,y.useState)(A.HW)),je=we[0],Se=we[1],Ce=(0,y.useState)(A.HW),Ee=Ce[0],Ae=Ce[1],Te=z((0,g.A$)(je,S),3),Oe=(Te[0],Te[1],Te[2]);(0,y.useEffect)((function(){Oe&&(xe(Oe),Ae(A.HW),Se(A.HW))}),[Oe]),(0,y.useEffect)((function(){te(Y())}),[U,$]),(0,y.useEffect)((function(){je.gt(A.HW)&&Ee.lte(ke)&&(ge(),Ae(A.HW),Se(A.HW))}),[je,ke]);var ze=O(r().mark((function e(){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!($||ie.length>0)){e.next=2;break}return e.abrupt("return");case 2:re&&parseInt(re.pay)>(0,h.aQ)(ke)?C().fire({text:F("common:approve-text-vault"),icon:"info",confirmButtonText:F("common:ok")}).then((function(e){e.isConfirmed&&(J(!0),Ae((0,h.kz)(re.pay)),Se(A.rb))})):(J(!0),ge());case 3:case"end":return e.stop()}}),e)}))),Me=(0,i.ff)("colorAccent.light","colorAccent.dark"),_e=function(e){var n={func:null,pay:0,args:[]},t=((e||"")+"").split(":");1==t.length?(n.func=t[0].trim(),t=[]):2==t.length||3==t.length?2==t.length?(n.func=t[0].trim(),t=t[1].split(",")):(n.readOnly=!0,n.func=t[1].trim(),t=t[2].split(",")):(t=[],n.func=null);for(var o=0;o<t.length;o++){var r=t[o].split(".");console.log("Parsed:0",o,r),r[0]&&r[1]&&("pay"==r[1].toLowerCase()?(n.pay+=parseInt(r[0]),n.args.push((0,h.kz)(r[0]).toString())):n.args.push(r[0]))}return console.log("Parsed:1",n),n.func?n:null},He=(0,y.useState)(),We=He[0],Ze=He[1],Ie=function(e){if(Ze(e),se(""),P){var n=P("".concat(e));n.error?se(n.error):n.input&&ae(_e(n.input))}else ae(_e(e))};(0,y.useEffect)((function(){if(n&&(0,h.aQ)(ye).gt(A.HW)&&le>0){var e=Math.round((0,h.aQ)(ye).toNumber()*le/100);Ie(e),fe(0)}}),[ye,le]);return(0,a.jsxs)(s.u_,{isOpen:t,onClose:o,closeOnOverlayClick:!1,children:[(0,a.jsx)(s.ZA,{}),(0,a.jsxs)(s.hz,{borderRadius:"32px",w:{base:"95%",md:"650px"},children:[(0,a.jsx)(s.xB,{w:"100%",d:"flex",justifyContent:"flex-end",children:(0,a.jsx)(u.xu,{as:E.aHS,onClick:o,cursor:"pointer",display:"italic"==_[ne]?"none":"block",children:F("common:cancel")})}),(0,a.jsx)(s.fe,{children:(0,a.jsxs)(u.gC,{children:[(0,a.jsx)(f.Z,{okText:F("common:ok"),mb:4,value:We,onChange:function(e){Ie(e.target.value)},title:H||"Enter Contract Arguments",paceholder:W||"funcName:arg1.type,arg2.type",errorMessage:ie,helperText:Z||'Click the "what is this" button to learn how.',infoText:F("common:info-text"),info:I||"Argument must be in the format: funcName:arg1.type,arg2.type. Types are: pay => which indicates the amount of token the contract will spend, the order types are the standard solifity types. Like uint256, address,... Example: stake:100.pay,1.uint256 means stake 100 of tokens(which requires the contract spending 100 tokens) at the vault with ID of 1"}),(0,a.jsx)(u.xv,{as:"div",textAlign:"center",children:F("common:value-symbol",[(0,a.jsx)("b",{children:d.Z.format((0,h.Xv)(ye),{locale:Q,minFD:2,maxFD:2})})])}),n?(0,a.jsx)(p.Z,{defaultValue:5,updateOnLoad:!0,percentages:[25,75,50],onChangeEnd:function(e){fe(e)}}):null]})}),(0,a.jsx)(s.mz,{children:(0,a.jsx)(u.Ug,{w:"100%",justifyContent:"flex-end",alignItems:"center",children:(0,a.jsx)(l.zx,{onClick:function(){U?ze():X()},ml:"25px",disabled:"italic"==_[ne]||!(null===re||void 0===re?void 0:re.func)&&"common:connect-wallet"!=ne,fontStyle:(null===re||void 0===re?void 0:re.func)?_[ne]:"italic",bg:Me,borderColor:Me,color:"#fff",textTransform:"capitalize",_hover:{opacity:.4},_disabled:{opacity:.4,cursor:"not-allowed"},children:"common:connect-wallet"==ne?F(ne):(null===re||void 0===re?void 0:re.func)?"0"==ne?R||"Execute ".concat(re.func):B||"Executing ".concat(re.func,"..."):R||"Waiting for command..."})})})]})]})}},36951:function(e,n,t){t.d(n,{Z:function(){return l}});var o=t(85893),r=t(80918),a=t(1440),c=t(68527),i=t(67294),s=t(55154),u=t(82138);function l(e){var n=e.onChangeEnd,t=e.defaultValue,l=e.percentages,f=e.noToolTip,d=e.updateOnLoad,p=(0,u.Z)("common"),m=p.t,h=(p.lang,(0,i.useState)(t||5)),x=h[0],g=h[1],v=(0,i.useState)(!1),y=v[0],b=v[1];return(0,i.useEffect)((function(){d&&n(x)}),[]),(0,i.useEffect)((function(){l&&l.length>0&&l.sort()}),[l]),(0,o.jsxs)(r.iR,{id:"slider",defaultValue:t||5,min:0,max:100,colorScheme:"teal",onChange:function(e){return g(e)},onMouseEnter:function(){return b(!0)},onMouseLeave:function(){return b(!1)},onChangeEnd:n,children:[(l||[]).map((function(e,n){var t=parseInt(e);if(t>0&&t<100)return(0,o.jsx)(r.jz,{value:t,mt:"1",ml:"-2.5",fontSize:"sm",children:m("percent-var",[t])},n)})),(0,o.jsx)(r.Uj,{children:(0,o.jsx)(r.Ms,{})}),f?(0,o.jsx)(r.gs,{boxSize:6}):(0,o.jsx)(a.u,{hasArrow:!0,bg:"teal.500",color:"white",placement:"top",isOpen:y,label:"".concat(x,"%"),children:(0,o.jsx)(r.gs,{boxSize:6,children:(0,o.jsx)(c.xu,{color:"tomato",as:s.RDp})})})]})}}}]);