(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[324],{17233:function(e,t,n){"use strict";n.d(t,{kN:function(){return h},pr:function(){return p},dw:function(){return u},Jf:function(){return x}});var r=n(10894),s=n(42846),a=n(44592),l=(n(1358),n(67294));function c(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}function i(){return(i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}var o=["className","children"],u=(0,s.Gp)((function(e,t){var n=(0,s.yK)();return l.createElement(s.m$.dt,i({ref:t},e,{className:(0,a.cx)("chakra-stat__label",e.className),__css:n.label}))}));a.Ts&&(u.displayName="StatLabel");var m=(0,s.Gp)((function(e,t){var n=(0,s.yK)();return l.createElement(s.m$.dd,i({ref:t},e,{className:(0,a.cx)("chakra-stat__help-text",e.className),__css:n.helpText}))}));a.Ts&&(m.displayName="StatHelpText");var x=(0,s.Gp)((function(e,t){var n=(0,s.yK)();return l.createElement(s.m$.dd,i({ref:t},e,{className:(0,a.cx)("chakra-stat__number",e.className),__css:i({},n.number,{fontFeatureSettings:"pnum",fontVariantNumeric:"proportional-nums"})}))}));a.Ts&&(x.displayName="StatNumber");var d=function(e){return l.createElement(r.JO,i({color:"red.400"},e),l.createElement("path",{fill:"currentColor",d:"M21,5H3C2.621,5,2.275,5.214,2.105,5.553C1.937,5.892,1.973,6.297,2.2,6.6l9,12 c0.188,0.252,0.485,0.4,0.8,0.4s0.611-0.148,0.8-0.4l9-12c0.228-0.303,0.264-0.708,0.095-1.047C21.725,5.214,21.379,5,21,5z"}))};a.Ts&&(d.displayName="StatDownArrow");var f=function(e){return l.createElement(r.JO,i({color:"green.400"},e),l.createElement("path",{fill:"currentColor",d:"M12.8,5.4c-0.377-0.504-1.223-0.504-1.6,0l-9,12c-0.228,0.303-0.264,0.708-0.095,1.047 C2.275,18.786,2.621,19,3,19h18c0.379,0,0.725-0.214,0.895-0.553c0.169-0.339,0.133-0.744-0.095-1.047L12.8,5.4z"}))};a.Ts&&(f.displayName="StatUpArrow");a.Ts;var h=(0,s.Gp)((function(e,t){var n=(0,s.jC)("Stat",e),r=i({position:"relative",flex:"1 1 0%"},n.container),u=(0,s.Lr)(e),m=u.className,x=u.children,d=c(u,o);return l.createElement(s.Fo,{value:n},l.createElement(s.m$.div,i({ref:t},d,{className:(0,a.cx)("chakra-stat",m),__css:r}),l.createElement("dl",null,x)))}));a.Ts&&(h.displayName="Stat");var p=(0,s.Gp)((function(e,t){return l.createElement(s.m$.div,i({},e,{ref:t,role:"group",className:(0,a.cx)("chakra-stat__group",e.className),__css:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",alignItems:"flex-start"}}))}));a.Ts&&(p.displayName="StatGroup")},87049:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/stakes",function(){return n(43179)}])},80974:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(85893),s=n(20949),a=n(68527),l=n(55154);function c(e){var t=e.message,n=e.icon,c=(0,s.ff)("colorAccent.light","colorAccent.dark");return(0,r.jsxs)(a.xu,{minH:"300px",w:"100%",h:"100%",d:"flex",flexDirection:"column",justifyContent:"flex-start",alignItems:"center",pt:"2rem",children:[(0,r.jsx)(a.xu,{color:c,mb:"1rem",children:n||(0,r.jsx)(l.x09,{size:"3rem"})}),(0,r.jsx)(a.xu,{children:t||""})]})}},24375:function(e,t,n){"use strict";n.d(t,{Z:function(){return c}});var r=n(85893),s=n(17233);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(null==e)return{};var n,r,s=function(e,t){if(null==e)return{};var n,r,s={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(s[n]=e[n]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(s[n]=e[n])}return s}function c(e){var t=e.children,n=l(e,["children"]);return(0,r.jsx)(s.Jf,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({fontSize:{base:"0.8rem",md:"1.3rem"}},n,{children:t}))}},43179:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return A},default:function(){return H}});var r=n(85893),s=n(17233),a=n(68527),l=n(82138),c=n(62133),i=n(37911),o=n(83897),u=n(4226),m=(n(46782),n(49920)),x=n(35666),d=n.n(x),f=n(92667),h=n(20949),p=n(26723),j=n(67294),g=n(2593),v=n(35553),k=n(49555),b=n(81961),N=n(94045),y=n(77044),w=n(38188),S=n(86455),_=n.n(S),O=n(80109),Z=n(16813),E=n(13365);function T(e,t,n,r,s,a,l){try{var c=e[a](l),i=c.value}catch(o){return void n(o)}c.done?t(i):Promise.resolve(i).then(r,s)}var C={"common:connect-wallet":"normal",unstake:"normal",unstaking:"italic"},z=function(e){var t=e.id,n=(e.owner,e.lockId,e.amount),s=e.unlockTime,l=e.lastDividendPoints,c=e.stakeHash,i=e.onRemove,u=e.lock,m=e.t,x=e.lang,S=(0,y.Ge)().account,z=(0,f.pm)(),D=(0,h.ff)("#fff","navbarBg.dark"),F=(0,h.ff)("#363636 !important","#d6d6d6 !important"),P=(0,h.ff)("#222 !important","#ccc !important"),I=(0,w.GF)(),L=(0,j.useState)(),X=L[0],G=L[1],W=function(){return S?X?"unstaking":"unstake":"common:connect-wallet"};(0,j.useEffect)((function(){}),[X]);var $=(0,j.useState)(W()),A=$[0],H=$[1],J=(0,j.useState)(),M=J[0],R=J[1];(0,O.k)(M,(function(){G(!1),i&&i(),_().fire({html:m("unstake-complete"),icon:"success",cancelButtonText:m("common:ok"),confirmButtonText:m("common:ok")})}),(function(){G(!1),H(W()),z({description:m("unstake-failed"),status:"error",duration:4e3,isClosable:!0})}));(0,j.useEffect)((function(){H(W())}),[X,S]);var U=(0,j.useState)(!0),K=U[0],B=U[1];(0,j.useEffect)((function(){B(!1)}),[s]);var V,q=function(){return parseFloat(v.bM(function(){var e=u?u.dividendPoints:Z.HW;return e.gt(Z.HW)?e.sub(g.O$.from(l)).mul(n):Z.HW}(),b.r2+b.RF))},Q=(V=d().mark((function e(){var n,r;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return G(!0),e.prev=1,e.next=4,I.unstake(t);case 4:n=e.sent,console.log("Unstake.result",n),R(n.hash),e.next=16;break;case 9:e.prev=9,e.t0=e.catch(1),r=e.t0.code,console.log("Unstake.error",r,e.t0),G(!1),H("unstake"),r!=b.O1.META_MASK_TX_DECLINED?z({description:m("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):z({description:m("common:tx-declined"),status:"error",duration:4e3,isClosable:!0});case 16:case"end":return e.stop()}}),e,null,[[1,9]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var s=V.apply(e,t);function a(e){T(s,n,r,a,l,"next",e)}function l(e){T(s,n,r,a,l,"throw",e)}a(void 0)}))});return(0,r.jsx)(a.xu,{className:"column is-one-third",w:{base:"100%",md:"33.33%"},children:(0,r.jsx)(a.xu,{className:"lazyload-wrapper ",style:{height:"100%"},children:(0,r.jsx)(a.xu,{className:"custom-card card is-flex is-flex-direction-column",bg:D,style:{height:"100%"},children:(0,r.jsxs)(a.xu,{className:"card-content is-flex-grow-1",children:[(0,r.jsxs)(a.xu,{className:"media is-flex is-align-items-center",flexWrap:"wrap",children:[(0,r.jsx)(a.xv,{as:"figure",className:"media-left title",textTransform:"capitalize",color:F,fontSize:{base:"16px",md:"18px"},children:"#".concat(t)}),(0,r.jsx)(a.xu,{className:"media-content",children:(0,r.jsx)(a.xu,{className:"is-flex is-justify-content-flex-end",children:(0,r.jsx)(a.xu,{className:"is-flex has-text-right is-flex-direction-column",children:(0,r.jsx)(a.xu,{className:"is-flex",children:(0,r.jsx)(a.xu,{as:"span",className:"is-flex status-dot filled",children:m("common:percent-var",[o.Z.format(q()/(0,N.Xv)(n)*100,{minFD:2,maxFD:2})],!0)})})})})})]}),(0,r.jsxs)(a.xu,{className:"soft-hard-cap",children:[(0,r.jsxs)(a.xv,{color:P,children:[m("UnstakeStatus"),":"]}),(0,r.jsx)("span",{children:X})]}),(0,r.jsxs)(a.xu,{className:"soft-hard-cap",children:[(0,r.jsxs)(a.xv,{color:P,children:[m("staked"),":"]}),(0,r.jsx)("span",{children:m("common:value-symbol",[o.Z.format((0,N.Xv)(n),{locale:x,minFD:2,maxFD:2})],!0)})]}),(0,r.jsx)(a.xu,{className:"lockup-time",children:(0,r.jsxs)(a.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(a.xv,{color:P,className:"is-flex-grow-1",children:[m("vault"),":"]}),(0,r.jsx)(E.Z,{isLoading:!u,as:"span",className:"is-flex-grow-1 has-text-right time-text",children:m(null===u||void 0===u?void 0:u.tag)})]})}),(0,r.jsx)(a.xu,{className:"lockup-time",children:(0,r.jsxs)(a.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(a.xv,{color:P,className:"is-flex-grow-1",children:[m("rewards"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:m("common:value-symbol",[o.Z.format(q(),{locale:x,minFD:2,maxFD:2})],!0)})]})}),(0,r.jsx)(a.xu,{className:"lockup-time",children:(0,r.jsxs)(a.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(a.xv,{color:P,className:"is-flex-grow-1",children:[m("stake-hash"),":"]}),(0,r.jsx)(a.xv,{as:"a",target:"_blank",href:(0,k.s6)(c,k.il.transaction),className:"is-flex-grow-1 has-text-right time-text text-trunc",maxW:{base:"5rem",md:"15rem"},d:"block",children:c})]})}),(0,r.jsx)(a.xu,{className:"lockup-time",children:(0,r.jsxs)(a.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(a.xv,{color:P,className:"is-flex-grow-1",children:[m("balance"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:m("common:value-symbol",[o.Z.format((0,N.Xv)(n)+q(),{locale:x,minFD:2,maxFD:2})],!0)})]})}),(0,r.jsx)(a.xu,{className:"lockup-time",children:(0,r.jsxs)(a.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(a.xv,{color:P,className:"is-flex-grow-1",children:[m("unlock-date"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:new Date(1e3*parseInt(s)).toLocaleString(x)})]})}),(0,r.jsx)(a.xu,{className:"custom-card-footer",children:(0,r.jsx)(a.xu,{className:"is-flex is-align-items-center",flexWrap:"wrap",children:(0,r.jsx)(a.xu,{className:"view-pool is-flex-grow-1",w:"100%",children:(0,r.jsx)(p.zx,{onClick:function(){K||X||(console.log("Unstake:1"),Q())},w:"100%",d:"flex",justifyContent:"center",alignItems:"center",textTransform:"capitalize",textAlign:"center",className:"view-button",disabled:"italic"==C[A]||K,fontStyle:C[A],_hover:{opacity:.4},_disabled:{opacity:.4,cursor:"not-allowed"},children:m(A)})})})})]})})})})},D=n(24375),F=n(20149),P=n(59521),I=n(61454),L=n(90599),X=n(55154),G=n(57060),W=n(80974);function $(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=!0,H=function(){var e=(0,l.Z)("stakes"),t=e.t,n=e.lang,x=(0,y.Ge)().account,d=(0,G.Z)().onOpen,f=(0,L.Zu)(x,b.Rs),h=f.myStakes,p=f.myStakesFirstFetching,j=f.myStakesNextFetching,v=(f.myStakesFirstError,f.myStakesNextError,f.nextMyStakes),k=f.removeStake,w=(f.minStakeId,(0,F.mM)()),S=w.balance,_=w.fetchStatus,O=(0,P.xL)(),Z=O.totalStaked,T=O.totalStakedStatus,C=(0,P.ZX)(),A=C.totalRewards,H=C.totalRewardsStatus,J=(0,P.$x)(),M=J.totalStakes,R=(J.totalStakesStatus,(0,P.sj)([1,2,3,4,5,6])),U=R.locks;R.locksStatus;return(0,r.jsx)(c.Z,{link:"/stakes",title:t("title"),description:t("common:sitedesc"),image:null,updatedTime:null,children:(0,r.jsxs)(u.Z,{children:[(0,r.jsxs)(s.pr,{w:"100%",borderRadius:"12px",borderWidth:"1px",p:"0.75rem",children:[(0,r.jsxs)(s.kN,{size:"sm",children:[(0,r.jsx)(s.dw,{fontSize:"0.9rem!important",children:t("wallet-balance")}),(0,r.jsx)(E.Z,{as:D.Z,isLoading:x&&_==b.J_.pending,children:t("common:value-symbol",[o.Z.format((0,N.Xv)(S.toString()),{locale:n,minFD:2,maxFD:2})],!0)})]}),(0,r.jsxs)(s.kN,{size:"sm",children:[(0,r.jsx)(s.dw,{fontSize:"0.9rem!important",children:t("total-staked")}),(0,r.jsx)(E.Z,{as:D.Z,isLoading:x&&T==b.J_.pending,children:t("common:value-symbol",[o.Z.format((0,N.Xv)(Z.toString()),{locale:n,minFD:2,maxFD:2})],!0)})]}),(0,r.jsxs)(s.kN,{size:"sm",children:[(0,r.jsx)(s.dw,{fontSize:"0.9rem!important",children:t("total-reward")}),(0,r.jsx)(E.Z,{as:D.Z,isLoading:x&&H==b.J_.pending,children:t("common:value-symbol",[o.Z.format((0,N.Xv)(A.toString()),{locale:n,minFD:2,maxFD:2})],!0)})]})]}),(0,r.jsxs)(a.Ug,{w:"100%",justifyContent:"space-between",alignItems:"center",mt:"5rem",mb:"0.5rem",children:[(0,r.jsxs)(a.X6,{as:"h3",size:"md",children:[t("stakes")," (",o.Z.format(M.toNumber(),{locale:n}),")"]}),(0,r.jsx)(I.Z,{as:i.Z,href:"/vault",children:t("stake")})]}),(0,r.jsx)(a.iz,{mb:"0.5rem"}),p||j||0!=(null===h||void 0===h?void 0:h.length)?null:(0,r.jsx)(W.Z,{message:t(x?"stakes-not-found":"connect-wallet-stakes"),icon:x?null:(0,r.jsxs)(a.gC,{children:[(0,r.jsx)(X.eKD,{size:"3rem"}),(0,r.jsx)(I.Z,{onClick:d,children:t("common:connect-wallet")})]})}),(0,r.jsx)(m.Z,{children:h.map((function(e,s){return(0,r.jsx)(z,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){$(e,t,n[t])}))}return e}({},e,{t:t,lang:n,lock:U.length<6?null:U[((null===e||void 0===e?void 0:e.lockId)||1)-1],onRemove:function(){k(s)}}),s)}))}),(0,r.jsxs)(a.gC,{w:"100%",justifyContent:"flex-start",alignItems:"center",children:[(0,r.jsx)(E.Z,{as:a.Ug,isLoading:p||j,justifyContent:"center",my:"15px",children:null}),(0,r.jsx)(I.Z,{d:h&&g.O$.from(h.length).gte(M)||p||j||!h||0==h.length?"none":"block",onClick:v,_disabled:{opacity:.4},_hover:{opactity:.4},children:t("common:load-more")})]})]})})}}},function(e){e.O(0,[868,827,607,612,455,921,247,409,680,94,163,931,774,888,179],(function(){return t=87049,e(e.s=t);var t}));var t=e.O();_N_E=t}]);