(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{89808:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/vault",function(){return n(23656)}])},49920:function(e,t,n){"use strict";n.d(t,{Z:function(){return i}});var r=n(85893),o=n(68527);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function i(e){var t=e.children,n=e.className,i=a(e,["children","className"]);return(0,r.jsx)(o.kC,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({className:"columns is-multiline ".concat(n||"")},i,{children:t}))}},61454:function(e,t,n){"use strict";var r=n(85893),o=n(20949),s=n(26723);function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}t.Z=function(e){var t=e.as,n=e.children,c=e.variant,l=i(e,["as","children","variant"]),u=(0,o.ff)("colorAccent.light","colorAccent.dark"),f=(0,o.ff)("colorAccentDestination.light","colorAccentDestination.dark");return(0,r.jsx)(s.zx,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){a(e,t,n[t])}))}return e}({as:t||"button",d:"inline-flex",justifyContent:"center",alignItems:"center",p:"0px 24px",h:"48px",letterSpacing:"0.03em",textAlign:"center",borderRadius:"16px",bg:"outline"==c?"transparent":u,border:"outline"==c?"2px solid":"none",borderColor:"outline"==c?f:"transparent",color:"outline"==c?f:"#fff",boxShadow:"ghost"==c||"outline"==c?"none":"rgb(14 14 44 / 40%) 0px -1px 0px 0px inset",opacity:"ghost"==c?"0.8":"1",transition:"background-color 0.2s ease 0s, opacity 0.2s ease 0s",_hover:{opacity:"0.65",bg:u,color:"#fff",border:"none !important"},_disabled:{opacity:"0.65",cursor:"not-allowed"}},l,{children:n}))}},23656:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return V},default:function(){return Y}});var r=n(85893),o=n(97375),s=n(68527),a=n(82138),i=n(37610),c=n(4226),l=n(49920),u=n(20949),f=n(83897),x=n(37911),m=n(35666),d=n.n(m),p=n(92667),h=n(98379),g=n(26723),b=n(14382),j=n(36951),v=n(81961),y=n(94045),w=n(17618),k=n(20149),O=n(67294),N=n(57060),S=n(77044),C=n(80109),T=n(90387),Z=n(86455),_=n.n(Z),P=n(55154),E=n(16813),A=n(98450);function D(e,t,n,r,o,s,a){try{var i=e[s](a),c=i.value}catch(l){return void n(l)}i.done?t(c):Promise.resolve(c).then(r,o)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var s=e.apply(t,n);function a(e){D(s,r,o,a,i,"next",e)}function i(e){D(s,r,o,a,i,"throw",e)}a(void 0)}))}}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,o=!1,s=void 0;try{for(var a,i=e[Symbol.iterator]();!(r=(a=i.next()).done)&&(n.push(a.value),!t||n.length!==t);r=!0);}catch(c){o=!0,s=c}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var I={"common:connect-wallet":"normal",stake:"normal",staking:"italic"},W=function(e){var t=e.isOpen,n=e.onClose,o=e.vaultId,i=(0,a.Z)("vault"),c=i.t,l=i.lang,m=(0,p.pm)(),Z=(0,T.useRouter)(),D=(0,S.Ge)().account,W=(0,N.Z)().onOpen,M=((0,w.Ib)(),(0,w.GF)()),B=(0,O.useState)(),H=B[0],G=B[1],L=function(){return D?H?"staking":"stake":"common:connect-wallet"},R=(0,O.useState)(L()),X=R[0],V=R[1],Y=(0,O.useState)(),q=Y[0],Q=Y[1],U=(0,O.useState)(""),J=U[0],K=U[1],$=(0,O.useState)(0),ee=$[0],te=$[1],ne=function(e){var t=e.code;console.log("Stake.error",t,e),G(!1),t!=v.O1.META_MASK_TX_DECLINED?m({description:c("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):m({description:c("common:tx-declined"),status:"error",duration:4e3,isClosable:!0})},re=(0,O.useState)(),oe=re[0],se=re[1],ae=((0,C.k)(oe,(function(){G(!1),_().fire({html:c("staked-complete"),icon:"success",showCancelButton:!0,showConfirmButton:!0,cancelButtonText:c("common:cancel"),confirmButtonText:c("stakes-dashboard")}).then((function(e){e.isConfirmed&&Z.push(x.Z.localise("/stakes/",l))}))}),(function(){K(c("staking-failed")),G(!1)})),z(d().mark((function e(t){var n;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.stake(D,t.toString(),o);case 3:n=e.sent,console.log("Staked.result","vaultId",o,"result",n),se(n.hash),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),ne(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))),ie=(0,k.mM)(),ce=ie.balance,le=(ie.fetchStatus,(0,k.Yl)()),ue=le.allowance,fe=(le.fetchStatusAllowance,(0,O.useState)(E.HW)),xe=fe[0],me=fe[1],de=F((0,k.A$)(xe,A.address),3),pe=(de[0],de[1],de[2]);(0,O.useEffect)((function(){pe&&(ne(pe),me(E.HW))}),[pe]),(0,O.useEffect)((function(){(0,y.aQ)(ce).gt(E.HW)&&ee>0&&(Q(Math.round((0,y.aQ)(ce).toNumber()*ee/100)),te(0))}),[ce,ee]),(0,O.useEffect)((function(){V(L())}),[D,H]),(0,O.useEffect)((function(){xe.gt(E.HW)&&(0,y.kz)(q).lte(ue)&&(ae((0,y.kz)(q)),me(E.HW))}),[xe,ue]);var he=z(d().mark((function e(){var t;return d().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!H){e.next=2;break}return e.abrupt("return");case 2:K(""),isNaN(q)||q<1?(K(c("enter-stake-amount-error")),t=!0):ce.lt((0,y.kz)(q))&&(K(c("common:user-low-balance-error",[q],!0)),t=!0),t||(ue.lt((0,y.kz)(q))?_().fire({text:c("common:approve-text-vault"),icon:"info",confirmButtonText:c("common:ok")}).then((function(e){e.isConfirmed&&(G(!0),me(E.rb))})):(G(!0),ae((0,y.kz)(q))));case 6:case"end":return e.stop()}}),e)}))),ge=(0,u.ff)("colorAccent.light","colorAccent.dark");return(0,r.jsxs)(h.u_,{isOpen:t,onClose:n,closeOnOverlayClick:!1,children:[(0,r.jsx)(h.ZA,{}),(0,r.jsxs)(h.hz,{borderRadius:"32px",w:{base:"95%",md:"650px"},children:[(0,r.jsx)(h.xB,{w:"100%",d:"flex",justifyContent:"flex-end",children:(0,r.jsx)(s.xu,{as:P.aHS,onClick:n,cursor:"pointer",display:"italic"==I[X]?"none":"block",children:c("common:cancel")})}),(0,r.jsx)(h.fe,{children:(0,r.jsxs)(s.gC,{children:[(0,r.jsx)(b.Z,{okText:c("common:ok"),mb:4,type:"number",value:q,onChange:function(e){isNaN(e.target.value)||Q(parseInt(e.target.value))},title:"".concat(c("enter-stake-amount")),errorMessage:J,infoText:c("common:info-text"),info:c("stake-amount-desc")}),(0,r.jsx)(s.xv,{as:"div",textAlign:"center",children:c("common:value-symbol",[(0,r.jsx)("b",{children:f.Z.format((0,y.Xv)(ce),{locale:l,minFD:2,maxFD:2})})])}),(0,r.jsx)(j.Z,{defaultValue:5,updateOnLoad:!0,percentages:[25,75,50],onChangeEnd:function(e){te(e)}})]})}),(0,r.jsx)(h.mz,{children:(0,r.jsx)(s.Ug,{w:"100%",justifyContent:"flex-end",alignItems:"center",children:(0,r.jsx)(g.zx,{onClick:function(){D?he():W()},ml:"25px",disabled:"italic"==I[X],fontStyle:I[X],bg:ge,borderColor:ge,color:"#fff",textTransform:"capitalize",_hover:{opacity:.4},_disabled:{opacity:.4,cursor:"not-allowed"},children:c(X)})})})]})]})},M=function(e){var t=e.id,n=e.tag,i=e.weight,c=e.rewardPercentage,l=e.tvl,x=e.profit,m=(0,a.Z)("vault"),d=m.t,p=m.lang,h=(0,u.ff)("#fff","navbarBg.dark"),g=(0,u.ff)("colorAccent.light","colorAccent.dark"),b=(0,u.ff)("#363636 !important","#d6d6d6 !important"),j=(0,u.ff)("#222 !important","#ccc !important"),v=(0,o.qY)(),y=v.isOpen,w=v.onOpen,k=v.onClose;return(0,r.jsxs)(s.xu,{className:"column is-one-third",w:{base:"100%",md:"33.33%"},children:[(0,r.jsx)(s.xu,{className:"lazyload-wrapper",style:{height:"100%"},children:(0,r.jsx)(s.xu,{className:"custom-card card is-flex is-flex-direction-column",bg:y?g:h,style:{height:"100%"},children:(0,r.jsxs)(s.xu,{className:"card-content is-flex-grow-1",children:[(0,r.jsxs)(s.xu,{className:"media is-flex is-align-items-center",flexWrap:"wrap",children:[(0,r.jsx)(s.xv,{as:"figure",className:"media-left title",textTransform:"capitalize",color:b,children:d(n)}),(0,r.jsx)(s.xu,{className:"media-content",children:(0,r.jsx)(s.xu,{className:"is-flex is-justify-content-flex-end",children:(0,r.jsx)(s.xu,{className:"is-flex has-text-right is-flex-direction-column",children:(0,r.jsx)(s.xu,{className:"is-flex",children:(0,r.jsx)(s.xu,{as:"span",className:"is-flex status-dot filled",children:d("common:percent-var",[f.Z.format(c,{minFD:2,maxFD:2})],!0)})})})})})]}),(0,r.jsxs)(s.xu,{className:"soft-hard-cap",children:[(0,r.jsxs)(s.xv,{color:j,children:[d("tvl"),":"]}),(0,r.jsx)("span",{children:d("common:value-symbol",[f.Z.format(l,{locale:p,minFD:2,maxFD:2})],!0)})]}),(0,r.jsx)(s.xu,{className:"lockup-time",children:(0,r.jsxs)(s.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(s.xv,{color:j,className:"is-flex-grow-1",children:[d("lock-up-time"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:d("".concat(n,"-time"))})]})}),(0,r.jsx)(s.xu,{className:"lockup-time",children:(0,r.jsxs)(s.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(s.xv,{color:j,className:"is-flex-grow-1",children:[d("reward"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:d("common:value-symbol",[f.Z.format(x,{locale:p,minFD:2,maxFD:2})],!0)})]})}),(0,r.jsx)(s.xu,{className:"lockup-time",children:(0,r.jsxs)(s.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(s.xv,{color:j,className:"is-flex-grow-1",children:[d("weight"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:f.Z.format(i,{locale:p,minFD:2,maxFD:2})})]})}),(0,r.jsx)(s.xu,{className:"lockup-time",children:(0,r.jsxs)(s.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(s.xv,{color:j,className:"is-flex-grow-1",children:[d("share-per-reward"),":"]}),(0,r.jsx)(f.Z,{as:"span",minFD:2,maxFD:2,suffix:"%",className:"is-flex-grow-1 has-text-right time-text",children:c})]})}),(0,r.jsx)(s.xu,{className:"custom-card-footer",children:(0,r.jsx)(s.xu,{className:"is-flex is-align-items-center",flexWrap:"wrap",children:(0,r.jsx)(s.xu,{className:"view-pool is-flex-grow-1",w:"100%",children:(0,r.jsx)(s.xu,{onClick:w,w:"100%",d:"flex",justifyContent:"center",alignItems:"center",textTransform:"capitalize",textAlign:"center",className:"view-button",href:"#",children:d("stake-here")})})})})]})})}),y?(0,r.jsx)(W,{isOpen:!0,onClose:k,vaultId:t}):null]})},B=n(13365),H=n(59521),G=n(46782),L=n(61454),R=(n(47451),n(27));function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=!0,Y=function(){var e=(0,a.Z)("vault").t,t=(0,H.sj)(),n=t.locks,u=t.locksStatus;console.log("Locks:",u,n);var f=(0,o.qY)(),x=f.isOpen,m=f.onOpen,d=f.onClose,p=(0,O.useState)(),h=p[0],g=p[1],b=(0,O.useState)(""),j=b[0],y=b[1];return(0,O.useEffect)((function(){}),[j]),(0,r.jsx)(i.Z,{link:"/vault",title:e("title"),description:e("common:sitedesc"),image:null,updatedTime:null,children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(B.Z,{as:s.Ug,isLoading:u===v.J_.pending,justifyContent:"center",children:null}),(0,r.jsx)(l.Z,{children:n.map((function(e,t){return(0,r.jsx)(M,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){X(e,t,n[t])}))}return e}({},e),t)}))}),(0,r.jsx)(s.xv,{as:"div",maxW:"600px",mt:"24px",fontSize:"0.9rem",children:e("share-per-reward-text")}),(0,r.jsx)(L.Z,{mt:"1rem",onClick:m,children:e("distribute")}),(0,r.jsx)(L.Z,{d:"none",onClick:function(){return g(!0)},children:e("Get Winners")}),x?(0,r.jsx)(G.Z,{usePriceSlider:!0,isOpen:!0,onClose:d,onResult:null,address:A.address,abi:A.abi,title:"".concat(e("enter-amount"),":"),info:e("amount-info"),helperText:e("amount-helper-text"),executeText:e("diburse-idle-text"),executingText:e("diburse-active-text"),okMessage:function(){return e("amount-send-ok")},notOkMessage:function(){return e("amount-send-not-ok")},placeholder:100,onValue:function(t){return isNaN(t)?{error:e("amount-error")}:{input:"diburseProfits:".concat(t.trim(),".pay")}}}):null,h?(0,r.jsx)(G.Z,{isOpen:!0,onClose:function(){return g(!1)},onComplete:function(e){if(Array.isArray(e)){for(var t={},n=0;n<e.length;n++)t[e[n].toString()]?t[e[n].toString()]=t[e[n].toString()]+1:t[e[n].toString()]=1;y(t)}else console.log("SecWinners:",e.toString())},address:R.address,abi:R.abi,title:"Total players",helperText:"",executeText:e("Fetch winners"),executingText:e("Fetching winners"),placeholder:"100",okMessage:function(e){return"Fetched: ".concat(e.toString())},notOkMessage:function(){return"Fetch failed"},onValue:function(e){return isNaN(e)?{error:"Enter total players"}:{input:"readOnly:secWinners:".concat(e.trim(),".uint256")}}}):null]})})}}},function(e){e.O(0,[377,642,612,921,247,875,907,782,774,888,179],(function(){return t=89808,e(e.s=t);var t}));var t=e.O();_N_E=t}]);