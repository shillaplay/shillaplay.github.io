(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[153],{89808:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/vault",function(){return n(23656)}])},61454:function(e,t,n){"use strict";var r=n(85893),a=n(20949),o=n(26723);function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}t.Z=function(e){var t=e.as,n=e.children,l=e.variant,c=i(e,["as","children","variant"]),u=(0,a.ff)("colorAccent.light","colorAccent.dark");return(0,r.jsx)(o.zx,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){s(e,t,n[t])}))}return e}({as:t||"button",d:"inline-flex",justifyContent:"center",alignItems:"center",p:"0px 24px",h:"48px",letterSpacing:"0.03em",textAlign:"center",borderRadius:"16px",bg:"outline"==l?"transparent":u,border:"outline"==l?"2px solid":"none",borderColor:"outline"==l?u:"transparent",color:"outline"==l?u:"#fff",boxShadow:"ghost"==l||"outline"==l?"none":"rgb(14 14 44 / 40%) 0px -1px 0px 0px inset",opacity:"ghost"==l?"0.8":"1",transition:"background-color 0.2s ease 0s, opacity 0.2s ease 0s",_hover:{opacity:"0.65",bg:u,color:"#fff"},_disabled:{opacity:"0.65",cursor:"not-allowed"}},c,{children:n}))}},23656:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return V},default:function(){return $}});var r=n(85893),a=n(97375),o=n(68527),s=n(82138),i=n(62133),l=n(4226),c=n(49920),u=n(20949),f=n(83897),x=n(37911),d=n(35666),m=n.n(d),h=n(92667),p=n(98379),g=n(26723),b=n(14382),j=n(36951),v=n(81961),w=n(94045),k=n(38188),y=n(20149),N=n(67294),O=n(57060),C=n(77044),S=n(80109),_=n(90387),Z=n(86455),T=n.n(Z),P=n(55154),E=n(16813),A=n(98450);function D(e,t,n,r,a,o,s){try{var i=e[o](s),l=i.value}catch(c){return void n(c)}i.done?t(l):Promise.resolve(l).then(r,a)}function z(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function s(e){D(o,r,a,s,i,"next",e)}function i(e){D(o,r,a,s,i,"throw",e)}s(void 0)}))}}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(l){a=!0,o=l}finally{try{r||null==i.return||i.return()}finally{if(a)throw o}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var M,W={"common:connect-wallet":"normal",stake:"normal",staking:"italic"},R=function(e){var t=e.isOpen,n=e.onClose,a=e.vaultId,i=(0,s.Z)("vault"),l=i.t,c=i.lang,d=(0,h.pm)(),Z=(0,_.useRouter)(),D=(0,C.Ge)().account,R=(0,O.Z)().onOpen,B=((0,k.Ib)(),(0,k.GF)()),H=(0,N.useState)(),G=H[0],L=H[1],X=function(){return D?G?"staking":"stake":"common:connect-wallet"},Q=(0,N.useState)(X()),U=Q[0],Y=Q[1],q=(0,N.useState)(),V=q[0],$=q[1],J=(0,N.useState)(""),K=J[0],ee=J[1],te=(0,N.useState)(0),ne=te[0],re=te[1],ae=function(e){var t=e.code;console.log("Stake.error",t,e),L(!1),t!=v.O1.META_MASK_TX_DECLINED?d({description:l("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):d({description:l("common:tx-declined"),status:"error",duration:4e3,isClosable:!0})},oe=(0,N.useState)(),se=oe[0],ie=oe[1],le=((0,S.k)(se,(function(){L(!1),T().fire({html:l("staked-complete"),icon:"success",showCancelButton:!0,showConfirmButton:!0,cancelButtonText:l("common:cancel"),confirmButtonText:l("stakes-dashboard")}).then((function(e){e.isConfirmed&&Z.push(x.Z.localise("/stakes/",c))}))}),(function(){ee(l("staking-failed")),L(!1)})),z(m().mark((function e(t){var n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B.stake(D,t.toString(),a);case 3:n=e.sent,console.log("Staked.result","vaultId",a,"result",n),ie(n.hash),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),ae(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))),ce=(0,y.mM)(),ue=ce.balance,fe=(ce.fetchStatus,(0,y.Yl)()),xe=fe.allowance,de=(fe.fetchStatusAllowance,(0,N.useState)(E.HW)),me=de[0],he=de[1],pe=I((0,y.A$)(me,A.address),3),ge=(pe[0],pe[1],pe[2]);(0,N.useEffect)((function(){ge&&(ae(ge),he(E.HW))}),[ge]),(0,N.useEffect)((function(){(0,w.aQ)(ue).gt(E.HW)&&ne>0&&($(Math.round((0,w.aQ)(ue).toNumber()*ne/100)),re(0))}),[ue,ne]),(0,N.useEffect)((function(){Y(X())}),[D,G]),(0,N.useEffect)((function(){me.gt(E.HW)&&me.lte(xe)&&(le(me),he(E.HW))}),[me,xe]);var be=z(m().mark((function e(){var t;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!G){e.next=2;break}return e.abrupt("return");case 2:ee(""),isNaN(V)||V<1?(ee(l("enter-stake-amount-error")),t=!0):ue.lt((0,w.kz)(V))&&(ee(l("common:user-low-balance-error",[V],!0)),t=!0),t||((0,w.aQ)(xe).lt(V)?T().fire({text:l("common:approve-text-vault"),icon:"info",confirmButtonText:l("common:ok")}).then((function(e){e.isConfirmed&&(L(!0),he((0,w.kz)(V)))})):(L(!0),le((0,w.kz)(V))));case 6:case"end":return e.stop()}}),e)}))),je=(0,u.ff)("colorAccent.light","colorAccent.dark");return(0,r.jsxs)(p.u_,{isOpen:t,onClose:n,closeOnOverlayClick:!1,children:[(0,r.jsx)(p.ZA,{}),(0,r.jsxs)(p.hz,(M={borderRadius:"32px",w:"auto"},F(M,"w",{base:"95%",md:"650px"}),F(M,"children",[(0,r.jsx)(p.xB,{w:"100%",d:"flex",justifyContent:"flex-end",children:(0,r.jsx)(o.xu,{as:P.aHS,onClick:n,cursor:"pointer",display:"italic"==W[U]?"none":"block",children:l("common:cancel")})}),(0,r.jsx)(p.fe,{children:(0,r.jsxs)(o.gC,{children:[(0,r.jsx)(b.Z,{okText:l("common:ok"),mb:4,type:"number",value:V,onChange:function(e){isNaN(e.target.value)||$(parseInt(e.target.value))},title:"".concat(l("enter-stake-amount")),errorMessage:K,infoText:l("common:info-text"),info:l("stake-amount-desc")}),(0,r.jsx)(o.xv,{as:"div",textAlign:"center",children:l("common:value-symbol",[(0,r.jsx)("b",{children:f.Z.format((0,w.Xv)(ue),{locale:c,minFD:2,maxFD:2})})])}),(0,r.jsx)(j.Z,{defaultValue:5,updateOnLoad:!0,percentages:[25,75,50],onChangeEnd:function(e){re(e)}})]})}),(0,r.jsx)(p.mz,{children:(0,r.jsx)(o.Ug,{w:"100%",justifyContent:"flex-end",alignItems:"center",children:(0,r.jsx)(g.zx,{onClick:function(){D?be():R()},ml:"25px",disabled:"italic"==W[U],fontStyle:W[U],bg:je,borderColor:je,color:"#fff",textTransform:"capitalize",_hover:{opacity:.4},_disabled:{opacity:.4,cursor:"not-allowed"},children:l(U)})})})]),M))]})},B=function(e){var t=e.id,n=e.tag,i=e.weight,l=e.rewardPercentage,c=e.tvl,x=e.profits,d=(e.dividendPoints,e.dividendPointsNumDecimals,(0,s.Z)("vault")),m=d.t,h=d.lang,p=(0,u.ff)("#fff","navbarBg.dark"),g=(0,u.ff)("colorAccent.light","colorAccent.dark"),b=(0,u.ff)("#363636 !important","#d6d6d6 !important"),j=(0,u.ff)("#222 !important","#ccc !important"),v=(0,a.qY)(),w=v.isOpen,k=v.onOpen,y=v.onClose;return(0,r.jsxs)(o.xu,{className:"column is-one-third",w:{base:"100%",md:"33.33%"},children:[(0,r.jsx)(o.xu,{className:"lazyload-wrapper",style:{height:"100%"},children:(0,r.jsx)(o.xu,{className:"custom-card card is-flex is-flex-direction-column",bg:w?g:p,style:{height:"100%"},children:(0,r.jsxs)(o.xu,{className:"card-content is-flex-grow-1",children:[(0,r.jsxs)(o.xu,{className:"media is-flex is-align-items-center",flexWrap:"wrap",children:[(0,r.jsx)(o.xv,{as:"figure",className:"media-left title",textTransform:"capitalize",color:b,children:m(n)}),(0,r.jsx)(o.xu,{className:"media-content",children:(0,r.jsx)(o.xu,{className:"is-flex is-justify-content-flex-end",children:(0,r.jsx)(o.xu,{className:"is-flex has-text-right is-flex-direction-column",children:(0,r.jsx)(o.xu,{className:"is-flex",children:(0,r.jsx)(o.xu,{as:"span",className:"is-flex status-dot filled",children:m("common:percent-var",[f.Z.format(l,{minFD:2,maxFD:2})],!0)})})})})})]}),(0,r.jsxs)(o.xu,{className:"soft-hard-cap",children:[(0,r.jsxs)(o.xv,{color:j,children:[m("tvl"),":"]}),(0,r.jsx)("span",{children:m("common:value-symbol",[f.Z.format(c,{locale:h,minFD:2,maxFD:2})],!0)})]}),(0,r.jsx)(o.xu,{className:"lockup-time",children:(0,r.jsxs)(o.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(o.xv,{color:j,className:"is-flex-grow-1",children:[m("lock-up-time"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:m("".concat(n,"-time"))})]})}),(0,r.jsx)(o.xu,{className:"lockup-time",children:(0,r.jsxs)(o.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(o.xv,{color:j,className:"is-flex-grow-1",children:[m("reward"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:m("common:value-symbol",[f.Z.format(x,{locale:h,minFD:2,maxFD:2})],!0)})]})}),(0,r.jsx)(o.xu,{className:"lockup-time",children:(0,r.jsxs)(o.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(o.xv,{color:j,className:"is-flex-grow-1",children:[m("weight"),":"]}),(0,r.jsx)("span",{className:"is-flex-grow-1 has-text-right time-text",children:f.Z.format(i,{locale:h,minFD:2,maxFD:2})})]})}),(0,r.jsx)(o.xu,{className:"lockup-time",children:(0,r.jsxs)(o.xu,{className:"is-flex is-align-items-center",textTransform:"capitalize",children:[(0,r.jsxs)(o.xv,{color:j,className:"is-flex-grow-1",children:[m("share-per-reward"),":"]}),(0,r.jsx)(f.Z,{as:"span",minFD:2,maxFD:2,suffix:"%",className:"is-flex-grow-1 has-text-right time-text",children:l})]})}),(0,r.jsx)(o.xu,{className:"custom-card-footer",children:(0,r.jsx)(o.xu,{className:"is-flex is-align-items-center",flexWrap:"wrap",children:(0,r.jsx)(o.xu,{className:"view-pool is-flex-grow-1",w:"100%",children:(0,r.jsx)(o.xu,{onClick:k,w:"100%",d:"flex",justifyContent:"center",alignItems:"center",textTransform:"capitalize",textAlign:"center",className:"view-button",href:"#",children:m("stake-here")})})})})]})})}),w?(0,r.jsx)(R,{isOpen:!0,onClose:y,vaultId:t}):null]})},H=n(13365),G=n(59521),L=n(46782),X=n(61454),Q=n(47451),U=n(2593),Y=n(35553);function q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var V=!0,$=function(){var e=(0,s.Z)("vault").t,t=(0,G.sj)([1,2,3,4,5,6]),n=t.locks,u=t.locksStatus;console.log("Locks:res5",u,n);var f=(0,a.qY)(),x=f.isOpen,d=f.onOpen,m=f.onClose,h=(0,N.useState)(),p=h[0],g=h[1];return(0,r.jsx)(i.Z,{link:"/vault",title:e("title"),description:e("common:sitedesc"),image:null,updatedTime:null,children:(0,r.jsxs)(l.Z,{children:[(0,r.jsx)(X.Z,{d:"none",onClick:function(){return g(!0)},children:e("Get unallocated rewards")}),(0,r.jsx)(H.Z,{as:o.Ug,isLoading:u===v.J_.pending,justifyContent:"center",children:null}),(0,r.jsx)(c.Z,{children:n.map((function(e,t){return(0,r.jsx)(B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){q(e,t,n[t])}))}return e}({},e),t)}))}),(0,r.jsx)(o.xv,{as:"div",maxW:"600px",mt:"24px",fontSize:"0.9rem",children:e("share-per-reward-text")}),(0,r.jsx)(X.Z,{mt:"1rem",onClick:d,children:e("distribute")}),x?(0,r.jsx)(L.Z,{usePriceSlider:!0,isOpen:!0,onClose:m,onResult:null,address:A.address,abi:A.abi,title:"".concat(e("enter-amount"),":"),info:e("amount-info"),helperText:e("amount-helper-text"),executeText:e("diburse-idle-text"),executingText:e("diburse-active-text"),okMessage:function(){return e("amount-send-ok")},notOkMessage:function(){return e("amount-send-not-ok")},placeholder:100,onValue:function(t){return isNaN(t)?{error:e("amount-error")}:{input:"diburseProfits:".concat(t.trim(),".pay")}}}):null,p?(0,r.jsx)(L.Z,{isOpen:!0,onClose:function(){return g(!1)},onResult:null,address:Q.Lk,abi:Q.Mt,title:"Get an uint256",helperText:(0,r.jsxs)(r.Fragment,{children:["Enter the command to fetch an uint256 value. Example: ",(0,r.jsx)("b",{children:"readOnly:balanceOf:0x000000000000000000000000000000000000dead.addr"})," reads unAllocatedRewards from the contract ",(0,r.jsx)("b",{children:"What is this button to learn more."})]}),okMessage:function(e){return"Unallocated Rewards: ".concat(Y.bM(U.O$.from(e.toString()),v.RF))},notOkMessage:function(){return"Fetch failed"},placeholder:"diburseProfits:100.pay"}):null]})})}}},function(e){e.O(0,[868,827,607,612,455,921,247,409,680,163,931,774,888,179],(function(){return t=89808,e(e.s=t);var t}));var t=e.O();_N_E=t}]);