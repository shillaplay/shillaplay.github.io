(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{20074:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/edit-game",function(){return e(45949)}])},94248:function(t,n,e){"use strict";e.d(n,{Z:function(){return l}});var r=e(85893),a=e(65988),u=e(68527);function o(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function c(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){o(t,n,e[n])}))}return t}function i(t,n){if(null==t)return{};var e,r,a=function(t,n){if(null==t)return{};var e,r,a={},u=Object.keys(t);for(r=0;r<u.length;r++)e=u[r],n.indexOf(e)>=0||(a[e]=t[e]);return a}(t,n);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(t);for(r=0;r<u.length;r++)e=u[r],n.indexOf(e)>=0||Object.prototype.propertyIsEnumerable.call(t,e)&&(a[e]=t[e])}return a}var s=function(t){t.duration,t.delay;return(0,r.jsx)(a.default,{id:"3a819cd25b408d8b",children:".floating-large-screen {-webkit-animation-name:floating;\nanimation-name:floating;\n-webkit-animation-iteration-count:infinite;\nanimation-iteration-count:infinite;\n-webkit-animation-timing-function:ease-in-out;\nanimation-timing-function:ease-in-out;\nanimation-play-state:running}\n@media (max-width:992px) {.floating-large-screen.mobile-pause {animation-play-state:paused}}\n@keyframes floating {from {transform:translate(0, 0px)}65% {transform:translate(0, 20px)}to {transform:translate(0, 0px)}}"})};function l(t){var n=t.as,e=t.children,a=t.mobilePause,o=t.className,l=t.duration,f=t.delay,d=i(t,["as","children","mobilePause","className","duration","delay"]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u.xu,c({as:n||"div"},d,{className:"floating-large-screen ".concat(a?"mobile-pause":""," ").concat(o||""),style:{animationDuration:l||"3s",animationDelay:f||"0s"}},d,{children:e})),(0,r.jsx)(s,{duration:l,delay:f})]})}},81593:function(t,n,e){"use strict";e(85893),e(67294)},20149:function(t,n,e){"use strict";e.d(n,{rQ:function(){return P},Ar:function(){return y},tf:function(){return j},Yl:function(){return E},A$:function(){return k},mM:function(){return O},iD:function(){return J}});var r=e(35666),a=e.n(r),u=e(67294),o=e(2593),c=e(77044),i=e(34515),s=e(47451),l=e(27),f=e(98450),d=e(81961),m=e(16813),p=e(85480),b=e(94045),h=e(37423),v=e(38188);function g(t,n,e,r,a,u,o){try{var c=t[u](o),i=c.value}catch(s){return void e(s)}c.done?n(i):Promise.resolve(i).then(r,a)}function S(t){return function(){var n=this,e=arguments;return new Promise((function(r,a){var u=t.apply(n,e);function o(t){g(u,r,a,o,c,"next",t)}function c(t){g(u,r,a,o,c,"throw",t)}o(void 0)}))}}function x(t,n,e){return n in t?Object.defineProperty(t,n,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[n]=e,t}function w(t){for(var n=1;n<arguments.length;n++){var e=null!=arguments[n]?arguments[n]:{},r=Object.keys(e);"function"===typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(e).filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})))),r.forEach((function(n){x(t,n,e[n])}))}return t}var y=function(t,n){var e=d.J_.pending,r=d.J_.ok,a=(d.J_.notOk,(0,u.useState)({mcap:0,mcapStatus:e})),o=a[0],c=a[1],i=(0,u.useState)(2e-4),s=i[0],l=(i[1],(0,u.useState)(r)),f=l[0];l[1];return(0,u.useEffect)((function(){c(n==r&&f==r?{mcap:t*s,mcapStatus:r}:function(t){return w({},t,{fetchStatus:n})})}),[n]),(0,u.useEffect)((function(){c(n==r&&f==r?{mcap:t*s,mcapStatus:r}:function(t){return w({},t,{fetchStatus:f})})}),[f]),o},k=function(t,n,e){var r=d.J_.pending,o=d.J_.ok,i=d.J_.notOk,s=(0,u.useState)(i),l=s[0],f=s[1],p=(0,u.useState)(m.HW),b=p[0],h=p[1],g=(0,c.Ge)(),x=g.account,w=(g.library,(0,u.useState)()),y=w[0],k=w[1],O=(0,v.Ib)(e,!0);return(0,u.useEffect)((function(){var e=S(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(r),e.next=4,O.approve(n,t.toString());case 4:h(t),f(o),e.next=14;break;case 8:e.prev=8,e.t0=e.catch(0),f(i),h(m.HW),k(e.t0),k(null);case 14:case"end":return e.stop()}}),e,null,[[0,8]])})));O&&t.gt(0)&&x&&n&&l!=r&&e()}),[t,x,n,O]),[b,h,y]},O=function(t,n,e){var r=d.J_.pending,i=d.J_.ok,s=d.J_.notOk,l=(0,u.useState)({balance:m.HW,fetchStatus:r}),f=l[0],p=l[1],g=(0,c.Ge)(),x=g.account,y=g.library,k=(0,v.Ib)(t),O=(0,u.useState)(n||x?(0,b.mu)(n||x):null),_=O[0],j=O[1],E=(0,u.useState)(n||x?(0,b.mu)(null,n||x):null),P=E[0],J=E[1],C=(0,h.Z)(_),H=(0,h.Z)(P);return(0,u.useEffect)((function(){x&&!n&&(j((0,b.mu)(x)),J((0,b.mu)(null,x)))}),[x]),(0,u.useEffect)((function(){var t=S(a().mark((function t(){var e,r;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k.balanceOf(n||x);case 3:e=t.sent,r=o.O$.from(e.toString()),p({balance:r,fetchStatus:i}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),p((function(t){return w({},t,{fetchStatus:s})}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));k&&(n||x)?e&&f.fetchStatus==i||t():p({balance:m.HW,fetchStatus:r})}),[x,i,s,y,C,H,n,k]),f},_=function(t,n,e){n||(n=s.Lk);var r=d.J_.pending,c=d.J_.ok,l=d.J_.notOk,f=(0,u.useState)({allowance:m.HW,fetchStatusAllowance:r}),v=f[0],g=f[1],x=(0,p.aQ)(),y=x.account,k=x.library,O=(0,u.useState)(e||y?(0,b.Mh)(e||y,t):null),_=O[0],j=O[1],E=(0,h.Z)(_);return(0,u.useEffect)((function(){(e||y)&&t&&j((0,b.Mh)(e||y,t))}),[y,e,t]),(0,u.useEffect)((function(){var u=S(a().mark((function r(){var u,s,f;return a().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return u=(0,i.jS)(n,k,y),r.prev=1,r.next=4,u.allowance(e||y,t);case 4:s=r.sent,f=o.O$.from(s.toString()),g({allowance:f,fetchStatusAllowance:c}),r.next=12;break;case 9:r.prev=9,r.t0=r.catch(1),g((function(t){return w({},t,{fetchStatus:l})}));case 12:case"end":return r.stop()}}),r,null,[[1,9]])})));e||y?u():g({allowance:m.HW,fetchStatusAllowance:r})}),[y,n,c,l,k,t,e,E]),v},j=function(t,n){return _((null===l||void 0===l?void 0:l.address)||"",t,n)},E=function(t,n){return _((null===f||void 0===f?void 0:f.address)||"",t,n)},P=function(t,n){var e=O(n,d.vn,t);return{burnedBalance:e.balance,burnedBalanceStatus:e.fetchStatus}},J=function(t){var n=d.J_.pending,e=d.J_.ok,r=d.J_.notOk,c=(0,u.useState)({holders:m.HW,holdersStatus:n}),i=c[0],s=c[1],l=(0,p.aQ)().library,f=(0,v.JE)(),g=(0,u.useState)((0,b.mu)()),x=g[0],y=(g[1],(0,h.Z)(x));return(0,u.useEffect)((function(){var n=S(a().mark((function t(){var n,u;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.currentHolders();case 3:n=t.sent,u=o.O$.from(n.toString()),s({holders:u,holdersStatus:e}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),s((function(t){return w({},t,{holdersStatus:r})}));case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));!f||t&&i.holdersStatus==e||n()}),[e,r,l,y,f]),i}},45949:function(t,n,e){"use strict";e.r(n),e.d(n,{__N_SSG:function(){return _},default:function(){return j}});var r=e(35666),a=e.n(r),u=e(85893),o=e(92667),c=e(68527),i=e(26723),s=e(82138),l=e(81961),f=(e(94045),e(62133)),d=e(37911);e(81593),e(94248);e(14382);var m=e(4226),p=e(67294),b=e(86455),h=e.n(b),v=e(77044),g=e(57060),S=e(20149),x=e(80109),w=e(38188),y=(e(27),e(75276)),k=e(90387);function O(t,n,e,r,a,u,o){try{var c=t[u](o),i=c.value}catch(s){return void e(s)}c.done?n(i):Promise.resolve(i).then(r,a)}var _=!0,j=function(){var t=(0,s.Z)("edit-game"),n=t.t,e=t.lang,r=(0,o.pm)(),b=(0,k.useRouter)(),_=b.query.id,j=(0,v.Ge)().account,E=(0,g.Z)().onOpen,P=(0,w.s5)(),J=((0,w.Ib)(),(0,p.useState)()),C=J[0],H=J[1],W=(0,p.useState)(),Z=W[0],N=W[1],A=function(){return j?Z?"updating":"update":"common:connect-wallet"},D=(0,p.useState)(A()),T=D[0],I=D[1];(0,p.useEffect)((function(){I(A())}),[j]);var B,G,M=(B=a().mark((function t(e){var u,o;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("update:",e),!Z){t.next=3;break}return t.abrupt("return");case 3:return N(!0),I("updating"),t.prev=5,console.log("submitHandler:txStatus.111",Z,A()),t.next=9,P.updateGame(_,e.entryPrice,e.countDownDuration,e.ownerPercentage,e.primaryWinnerPercentage,e.secondaryWinnerPercentage);case 9:u=t.sent,H(u.hash),t.next=20;break;case 13:t.prev=13,t.t0=t.catch(5),o=t.t0.code,console.log("submitHandler:2",o,t.t0),N(!1),I("update"),o!=l.O1.META_MASK_TX_DECLINED?r({description:n("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):r({description:n("common:tx-declined"),status:"error",duration:4e3,isClosable:!0});case 20:case"end":return t.stop()}}),t,null,[[5,13]])})),function(){var t=this,n=arguments;return new Promise((function(e,r){var a=B.apply(t,n);function u(t){O(a,e,r,u,o,"next",t)}function o(t){O(a,e,r,u,o,"throw",t)}u(void 0)}))}),$=((0,x.k)(C,(function(t){console.log("submitHandler:txStatus.2",t),N(!1),I("update"),h().fire({text:n("updating-ok"),icon:"info",showCancelButton:!0,showConfirmButton:!0,cancelButtonText:n("common:cancel"),confirmButtonText:n("mint-game:manage-nft")}).then((function(t){t.isConfirmed&&b.push(d.Z.localise("/game/?id=".concat(_),e))}))}),(function(){r({description:n("updating-failed"),status:"error",duration:4e3,isClosable:!0}),N(!1),I(A())})),(0,S.mM)()),z=($.balance,$.fetchStatus,(0,p.useState)()),Q=z[0],X=z[1],L=(0,p.useState)(),R=L[0],q=L[1],F=function(t){q(t),j?M(t):(X(!0),E())};(0,p.useEffect)((function(){Q&&j&&(F(R),X(!1))}),[j]);return(0,u.jsx)(f.Z,{link:"/update-game",title:n("title"),description:n("desc"),image:null,updatedTime:null,children:(0,u.jsx)(m.Z,{children:(0,u.jsx)(c.kC,{width:"full",align:"center",justifyContent:"center",alignItems:"center",children:(0,u.jsxs)(c.xu,{p:8,width:"550px",maxW:"100%",borderWidth:1,borderRadius:8,boxShadow:"lg",children:[(0,u.jsxs)(c.Ug,{textAlign:"center",justifyContent:"space-between",alignItems:"center",mb:"50px",children:[(0,u.jsx)(c.xv,{fontSize:"sm",children:n("game-id",[_])}),(0,u.jsx)(i.zx,{type:"submit",textTransform:"capitalize",onClick:G,children:n("reset")})]}),(0,u.jsx)(c.xu,{my:4,textAlign:"left",children:(0,u.jsx)(y.Z,{submitHandler:F,resetGetter:function(t){G=t},gameStyle:{"common:connect-wallet":"normal",update:"normal",updating:"italic"}[T],gameStatus:T,id:_})})]})})})})}}},function(t){t.O(0,[868,827,607,612,455,921,409,680,276,774,888,179],(function(){return n=20074,t(t.s=n);var n}));var n=t.O();_N_E=n}]);