(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{20074:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/edit-game",function(){return n(45949)}])},45949:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return E},default:function(){return P}});var r=n(35666),a=n.n(r),i=n(85893),o=n(92667),u=n(20949),c=n(68527),s=n(26723),l=n(82138),d=n(81961),f=(n(94045),n(37610)),m=n(37911);n(94248);n(14382);var p=n(4226),g=n(67294),x=n(86455),b=n.n(x),h=n(77044),v=n(57060),w=n(20149),_=n(80109),S=n(17618),j=(n(27),n(75276)),k=n(90387),C=n(53161);function y(e,t,n,r,a,i,o){try{var u=e[i](o),c=u.value}catch(s){return void n(s)}u.done?t(c):Promise.resolve(c).then(r,a)}var E=!0,P=function(){var e=(0,l.Z)("edit-game"),t=e.t,n=e.lang,r=(0,o.pm)(),x=(0,k.useRouter)(),E=x.query.id,P=(0,h.Ge)().account,T=(0,v.Z)().onOpen,N=(0,S.s5)(),Z=((0,S.Ib)(),(0,g.useState)()),B=Z[0],I=Z[1],z=(0,g.useState)(),A=z[0],D=z[1],H=function(){return P?A?"updating":"update":"common:connect-wallet"},O=(0,g.useState)(H()),G=O[0],M=O[1];(0,g.useEffect)((function(){M(H())}),[P]);var W,X=(W=a().mark((function e(n){var i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("update:",n),!A){e.next=3;break}return e.abrupt("return");case 3:return D(!0),M("updating"),e.prev=5,console.log("submitHandler:txStatus.111",A,H()),e.next=9,N.updateGame(E,n.entryPrice,n.countDownDuration,n.ownerPercentage,n.primaryWinnerPercentage,n.secondaryWinnerPercentage);case 9:i=e.sent,I(i.hash),e.next=20;break;case 13:e.prev=13,e.t0=e.catch(5),o=e.t0.code,console.log("submitHandler:2",o,e.t0),D(!1),M("update"),o!=d.O1.META_MASK_TX_DECLINED?r({description:t("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):r({description:t("common:tx-declined"),status:"error",duration:4e3,isClosable:!0});case 20:case"end":return e.stop()}}),e,null,[[5,13]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var a=W.apply(e,t);function i(e){y(a,n,r,i,o,"next",e)}function o(e){y(a,n,r,i,o,"throw",e)}i(void 0)}))}),R=((0,_.k)(B,(function(e){console.log("submitHandler:txStatus.2",e),D(!1),M("update"),b().fire({text:t("updating-ok"),icon:"info",showCancelButton:!0,showConfirmButton:!0,cancelButtonText:t("common:cancel"),confirmButtonText:t("mint-game:manage-nft")}).then((function(e){e.isConfirmed&&x.push(m.Z.localise("/game/?id=".concat(E),n))}))}),(function(){r({description:t("updating-failed"),status:"error",duration:4e3,isClosable:!0}),D(!1),M(H())})),(0,w.mM)()),q=(R.balance,R.fetchStatus,(0,g.useState)()),K=q[0],L=q[1],U=(0,g.useState)(),F=U[0],J=U[1],Q=function(e){J(e),P?X(e):(L(!0),T())};(0,g.useEffect)((function(){K&&P&&(Q(F),L(!1))}),[P]);var V=(0,g.useState)(),Y=V[0],$=V[1];return(0,i.jsx)(f.Z,{link:"/edit-game",title:t("title"),description:t("desc"),image:null,updatedTime:null,bg:(0,u.ff)("linear-gradient(rgb(111, 182, 241) 0%, rgb(234, 242, 246) 100%)","linear-gradient(rgb(11, 69, 118) 0%, rgb(9, 17, 21) 100%)"),children:(0,i.jsx)(c.xu,{w:"100%",pos:"relative",zIndex:"1",children:(0,i.jsxs)(p.Z,{children:[(0,i.jsx)(C.Z,{}),(0,i.jsx)(c.kC,{width:"full",align:"center",justifyContent:"center",alignItems:"center",children:(0,i.jsxs)(c.xu,{width:"550px",maxW:"100%",bg:(0,u.ff)("rgba(255, 255, 255, 0.6)","rgba(8, 6, 11, 0.6)"),border:(0,u.ff)("1px solid rgb(231, 227, 235)","1px solid rgb(56, 50, 65)"),borderRadius:"72px",backdropBlur:"blur(12px)",p:{base:"10px",md:"40px"},children:[(0,i.jsxs)(c.Ug,{textAlign:"center",justifyContent:"space-between",alignItems:"center",mb:"50px",children:[(0,i.jsx)(c.xv,{fontSize:"sm",children:t("game-id",[E])}),(0,i.jsx)(s.zx,{type:"submit",textTransform:"capitalize",onClick:function(){$(!Y)},children:t("reset")})]}),(0,i.jsx)(c.xu,{my:4,textAlign:"left",children:(0,i.jsx)(j.Z,{submitHandler:Q,resetState:Y,gameStyle:{"common:connect-wallet":"normal",update:"normal",updating:"italic"}[G],gameStatus:G,id:E})})]})})]})})})}}},function(e){e.O(0,[377,642,612,921,875,592,652,774,888,179],(function(){return t=20074,e(e.s=t);var t}));var t=e.O();_N_E=t}]);