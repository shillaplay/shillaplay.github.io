(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{11537:function(n,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/mint-game",function(){return t(23761)}])},23761:function(n,e,t){"use strict";t.r(e),t.d(e,{__N_SSG:function(){return E}});var r=t(35666),i=t.n(r),o=t(85893),a=t(92667),c=t(20949),s=t(68527),u=t(82138),l=t(81961),d=t(37610),m=t(37911),f=t(4226),x=t(67294),g=t(86455),p=t.n(g),b=t(77044),h=t(57060),v=t(80109),w=t(17618),S=t(75276),_=(t(94248),t(90387)),k=t(53161);function C(n,e,t,r,i,o,a){try{var c=n[o](a),s=c.value}catch(u){return void t(u)}c.done?e(s):Promise.resolve(s).then(r,i)}function j(n){return function(){var e=this,t=arguments;return new Promise((function(r,i){var o=n.apply(e,t);function a(n){C(o,r,i,a,c,"next",n)}function c(n){C(o,r,i,a,c,"throw",n)}a(void 0)}))}}var E=!0;e.default=function(){var n=(0,u.Z)("mint-game"),e=n.t,t=n.lang,r=(0,a.pm)(),g=(0,_.useRouter)(),C=(0,b.Ge)().account,E=(0,h.Z)().onOpen,y=(0,w.s5)(),P=(0,x.useState)(),N=P[0],T=P[1],Z=(0,x.useState)(),H=Z[0],B=Z[1],O=function(){return C?H?"minting":"mint":"common:connect-wallet"},A=(0,x.useState)(O()),D=A[0],G=A[1],X=j(i().mark((function n(o){var a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("submitHandler:txStatus.2",o),n.prev=1,n.next=4,y.lastGameMintOf(C);case 4:a=n.sent,console.log("submitHandler:txStatus.3",a,a.toString()),B(!1),p().fire({text:e("minting-ok",[a.toString()],!0),icon:"info",showCancelButton:!0,showConfirmButton:!0,cancelButtonText:e("common:cancel"),confirmButtonText:e("manage-nft")}).then((function(n){n.isConfirmed&&g.push(m.Z.localise("/game/?id=".concat(a.toString()),t))})),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(1),console.log("submitHandler:txStatus.4",n.t0),B(!1),r({description:e("common:conn-error"),status:"error",duration:4e3,isClosable:!0});case 15:case"end":return n.stop()}}),n,null,[[1,10]])}))),I=j(i().mark((function n(t){var o,a;return i().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!H){n.next=2;break}return n.abrupt("return");case 2:return B(!0),n.prev=3,console.log("submitHandler:txStatus.111",H,O()),n.next=7,y.mint(t.entryPrice,t.countDownDuration,t.ownerPercentage,t.primaryWinnerPercentage,t.secondaryWinnerPercentage);case 7:o=n.sent,T(o.hash),n.next=17;break;case 11:n.prev=11,n.t0=n.catch(3),a=n.t0.code,console.log("submitHandler:2",a,n.t0),B(!1),a!=l.O1.META_MASK_TX_DECLINED?r({description:e("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):r({description:e("common:tx-declined"),status:"error",duration:4e3,isClosable:!0});case 17:case"end":return n.stop()}}),n,null,[[3,11]])}))),M=((0,v.k)(N,X,(function(){r({description:e("minting-failed"),status:"error",duration:4e3,isClosable:!0}),B(!1)})),(0,x.useState)()),W=M[0],z=M[1],R=(0,x.useState)(),K=R[0],L=R[1],q=function(n){C?I(n):(z(!0),L(n),E())};(0,x.useEffect)((function(){W&&C&&K&&(q(),z(!1)),G(O())}),[C]),(0,x.useEffect)((function(){G(O())}),[H]);return(0,o.jsx)(d.Z,{link:"/mint-game",title:e("title"),description:e("desc"),image:null,updatedTime:null,bg:(0,c.ff)("linear-gradient(rgb(111, 182, 241) 0%, rgb(234, 242, 246) 100%)","linear-gradient(rgb(11, 69, 118) 0%, rgb(9, 17, 21) 100%)"),children:(0,o.jsx)(s.xu,{w:"100%",pos:"relative",zIndex:"1",children:(0,o.jsxs)(f.Z,{children:[(0,o.jsx)(k.Z,{}),(0,o.jsx)(s.kC,{width:"full",align:"center",justifyContent:"center",alignItems:"center",children:(0,o.jsxs)(s.xu,{width:"550px",maxW:"100%",bg:(0,c.ff)("rgba(255, 255, 255, 0.6)","rgba(8, 6, 11, 0.6)"),border:(0,c.ff)("1px solid rgb(231, 227, 235)","1px solid rgb(56, 50, 65)"),borderRadius:"72px",backdropBlur:"blur(12px)",p:{base:"10px",md:"40px"},children:[(0,o.jsx)(s.xu,{textAlign:"center",children:(0,o.jsx)(s.X6,{fontSize:"16px",p:"7px",children:e("desc")})}),(0,o.jsx)(s.xu,{my:4,textAlign:"left",children:(0,o.jsx)(S.Z,{submitHandler:q,resetGetter:function(n){n},gameStyle:{"common:connect-wallet":"normal",mint:"normal",minting:"italic"}[D],gameStatus:D})})]})})]})})})}}},function(n){n.O(0,[377,642,612,921,875,592,652,774,888,179],(function(){return e=11537,n(n.s=e);var e}));var e=n.O();_N_E=e}]);