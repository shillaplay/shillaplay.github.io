(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[843],{20074:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/edit-game",function(){return n(45949)}])},75276:function(e,t,n){"use strict";var r=n(85893),o=n(68527),a=n(26723),c=n(14382),i=n(13365),u=n(82138),s=n(81961),l=n(94045),m=n(57277),d=n(67294),p=n(83897);t.Z=function(e){var t=e.resetGetter,n=e.id,f=e.submitHandler,g=e.gameStyle,x=e.gameStatus,y=(0,u.Z)("edit-game"),w=y.t,h=y.lang,b=(0,m.$x)(n),v=b.owner,S=b.entryPrice,C=b.countDownDuration,j=b.primaryWinnerPercentage,k=b.secondaryWinnerPercentage,P=b.ownerPercentage,T=b.gameInfoStatus,_=(0,d.useState)(),N=_[0],Z=_[1],M=(0,d.useState)(""),E=M[0],B=M[1],I=(0,d.useState)(),D=I[0],W=I[1],z=(0,d.useState)(""),G=z[0],H=z[1],A=(0,d.useState)(),L=A[0],O=A[1],X=(0,d.useState)(""),F=X[0],R=X[1],$=(0,d.useState)(),q=$[0],J=$[1],K=(0,d.useState)(""),Q=K[0],U=K[1],V=(0,d.useState)(),Y=V[0],ee=V[1],te=(0,d.useState)(""),ne=te[0],re=te[1],oe=function(){console.log("reset::"),Z((0,l.aQ)(S,0)),W(parseInt(C)),O(parseInt(P)),J(parseInt(j)),ee(parseInt(k))};(0,d.useEffect)((function(){t&&t(oe)}),[]),(0,d.useEffect)((function(){v.toLowerCase()!=s.je&&oe()}),[v]);var ae=function(e,t){t(isNaN(e)?"":parseInt(e))},ce=!1;return T==s.J_.pending?(0,r.jsx)(o.xu,{d:"flex",justifyContent:"center",alignItems:"flex-start",children:(0,r.jsx)(i.Z,{isLoading:!0,children:""})}):(0,r.jsxs)("form",{onSubmit:function(e){try{e.preventDefault()}catch(o){}ce=!1,B(""),H(""),R(""),U(""),re(""),(0,l.N4)(N)&&(ce=!0,B(w("entry-price-empty-error"))),N<s.bB.minEntryPrice&&(ce=!0,B(w("entry-price-empty-error"))),(0,l.N4)(D)&&(ce=!0,H(w("countdown-empty-error"))),D<s.bB.gameMinCountdown&&(ce=!0,H(w("countdown-min-error",[s.bB.gameMinCountdown],!0))),D>s.bB.gameMaxCountdown&&(console.log("Form: ".concat(C,"Input | isNaN ").concat(D," = $").concat(isNaN(D)," | gt: ").concat(D>s.bB.gameMaxCountdown)),ce=!0,H(w("countdown-max-error",[s.bB.gameMaxCountdown],!0)));var t=!0,n=!0,r=!0;((0,l.N4)(L)||L<1)&&(ce=!0,t=!1,R(w("owner-empty-error"))),((0,l.N4)(q)||L<1)&&(ce=!0,n=!1,U(w("primary-empty-error"))),((0,l.N4)(Y)||L<1)&&(ce=!0,r=!1,re(w("secondary-empty-error"))),t&&n&&r&&L+q+Y!=100&&(console.log("Form: ".concat(L+q+Y," != 100")),ce=!0,R(w("percentage-error")),U(w("percentage-error")),re(w("percentage-error"))),!ce&&f&&(v.toLowerCase()==s.je?f({entryPrice:N,countDownDuration:D,ownerPercentage:L,primaryWinnerPercentage:q,secondaryWinnerPercentage:Y}):f({entryPrice:N==S?0:N,countDownDuration:D==C?0:D,ownerPercentage:L==P?0:L,primaryWinnerPercentage:q==j?0:q,secondaryWinnerPercentage:Y==k?0:Y}))},children:[(0,r.jsx)(c.Z,{okText:w("common:ok"),mb:4,title:"".concat(w("entry-price")),name:"entry-price",type:"number",errorMessage:E,infoText:w("info-text"),info:w("entry-price-desc"),helperText:w("entry-price-help",[p.Z.format(s.bB.minEntryPrice,{locale:h})]),value:N,onChange:function(e){return ae(e.target.value,Z)}}),(0,r.jsx)(c.Z,{okText:w("common:ok"),mb:4,title:"".concat(w("countdown")),name:"countdown",type:"number",errorMessage:G,infoText:w("info-text"),info:w("countdown-desc"),helperText:w("countdown-helper-text",[p.Z.format(s.bB.gameMinCountdown,{locale:h}),p.Z.format(s.bB.gameMaxCountdown,{locale:h})]),value:D,onChange:function(e){return ae(e.target.value,W)}}),(0,r.jsx)(c.Z,{okText:w("common:ok"),mb:4,title:"".concat(w("owner-percentage")),name:"owner-percentage",type:"number",errorMessage:F,infoText:w("info-text"),info:w("owner-percentage-desc"),placeholder:15,value:L,onChange:function(e){return ae(e.target.value,O)}}),(0,r.jsx)(c.Z,{okText:w("common:ok"),mb:4,title:"".concat(w("primary-percentage")),name:"primary-percentage",type:"number",errorMessage:Q,infoText:w("info-text"),info:w("primary-percentage-desc"),placeholder:65,value:q,onChange:function(e){return ae(e.target.value,J)}}),(0,r.jsx)(c.Z,{okText:w("common:ok"),mb:4,title:"".concat(w("secondary-percentage")),name:"secondary-percentage",type:"number",errorMessage:ne,infoText:w("info-text"),info:w("secondary-percentage-desc"),placeholder:20,value:Y,onChange:function(e){return ae(e.target.value,ee)}}),(0,r.jsx)(a.zx,{width:"full",type:"submit",textTransform:"capitalize",disabled:"italic"==g,fontStyle:g,children:w(x)})]})}},81593:function(e,t,n){"use strict";n(85893),n(67294)},45949:function(e,t,n){"use strict";n.r(t),n.d(t,{__N_SSG:function(){return k},default:function(){return P}});var r=n(35666),o=n.n(r),a=n(85893),c=n(92667),i=n(68527),u=n(26723),s=n(82138),l=n(81961),m=(n(94045),n(62133)),d=n(37911);n(81593),n(94248);n(14382);var p=n(4226),f=n(67294),g=n(86455),x=n.n(g),y=n(77044),w=n(57060),h=n(20149),b=n(80109),v=n(38188),S=(n(27),n(75276)),C=n(90387);function j(e,t,n,r,o,a,c){try{var i=e[a](c),u=i.value}catch(s){return void n(s)}i.done?t(u):Promise.resolve(u).then(r,o)}var k=!0,P=function(){var e=(0,s.Z)("edit-game"),t=e.t,n=e.lang,r=(0,c.pm)(),g=(0,C.useRouter)(),k=g.query.id,P=(0,y.Ge)().account,T=(0,w.Z)().onOpen,_=(0,v.s5)(),N=((0,v.Ib)(),(0,f.useState)()),Z=N[0],M=N[1],E=(0,f.useState)(),B=E[0],I=E[1],D=function(){return P?B?"updating":"update":"common:connect-wallet"},W=(0,f.useState)(D()),z=W[0],G=W[1];(0,f.useEffect)((function(){G(D())}),[P]);var H,A,L=(H=o().mark((function e(n){var a,c;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("update:",n),!B){e.next=3;break}return e.abrupt("return");case 3:return I(!0),G("updating"),e.prev=5,console.log("submitHandler:txStatus.111",B,D()),e.next=9,_.updateGame(k,n.entryPrice,n.countDownDuration,n.ownerPercentage,n.primaryWinnerPercentage,n.secondaryWinnerPercentage);case 9:a=e.sent,M(a.hash),e.next=20;break;case 13:e.prev=13,e.t0=e.catch(5),c=e.t0.code,console.log("submitHandler:2",c,e.t0),I(!1),G("update"),c!=l.O1.META_MASK_TX_DECLINED?r({description:t("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):r({description:t("common:tx-declined"),status:"error",duration:4e3,isClosable:!0});case 20:case"end":return e.stop()}}),e,null,[[5,13]])})),function(){var e=this,t=arguments;return new Promise((function(n,r){var o=H.apply(e,t);function a(e){j(o,n,r,a,c,"next",e)}function c(e){j(o,n,r,a,c,"throw",e)}a(void 0)}))}),O=((0,b.k)(Z,(function(e){console.log("submitHandler:txStatus.2",e),I(!1),G("update"),x().fire({text:t("updating-ok"),icon:"info",showCancelButton:!0,showConfirmButton:!0,cancelButtonText:t("common:cancel"),confirmButtonText:t("mint-game:manage-nft")}).then((function(e){e.isConfirmed&&g.push(d.Z.localise("/game/?id=".concat(k),n))}))}),(function(){r({description:t("updating-failed"),status:"error",duration:4e3,isClosable:!0}),I(!1),G(D())})),(0,h.mM)()),X=(O.balance,O.fetchStatus,(0,f.useState)()),F=X[0],R=X[1],$=(0,f.useState)(),q=$[0],J=$[1],K=function(e){J(e),P?L(e):(R(!0),T())};(0,f.useEffect)((function(){F&&P&&(K(q),R(!1))}),[P]);return(0,a.jsx)(m.Z,{link:"/update-game",title:t("title"),description:t("desc"),image:null,updatedTime:null,children:(0,a.jsx)(p.Z,{children:(0,a.jsx)(i.kC,{width:"full",align:"center",justifyContent:"center",alignItems:"center",children:(0,a.jsxs)(i.xu,{p:8,width:"550px",maxW:"100%",borderWidth:1,borderRadius:8,boxShadow:"lg",children:[(0,a.jsxs)(i.Ug,{textAlign:"center",justifyContent:"space-between",alignItems:"center",mb:"50px",children:[(0,a.jsx)(i.xv,{fontSize:"sm",children:t("game-id",[k])}),(0,a.jsx)(u.zx,{type:"submit",textTransform:"capitalize",onClick:A,children:t("reset")})]}),(0,a.jsx)(i.xu,{my:4,textAlign:"left",children:(0,a.jsx)(S.Z,{submitHandler:K,resetGetter:function(e){A=e},gameStyle:{"common:connect-wallet":"normal",update:"normal",updating:"italic"}[z],gameStatus:z,id:k})})]})})})})}}},function(e){e.O(0,[868,827,607,612,455,921,409,680,390,774,888,179],(function(){return t=20074,e(e.s=t);var t}));var t=e.O();_N_E=t}]);