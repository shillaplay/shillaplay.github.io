(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[689],{11537:function(n,t,e){(window.__NEXT_P=window.__NEXT_P||[]).push(["/[locale]/mint-game",function(){return e(23761)}])},23761:function(n,t,e){"use strict";e.r(t),e.d(t,{__N_SSG:function(){return C}});var r=e(35666),o=e.n(r),i=e(85893),c=e(92667),a=e(68527),s=e(82138),u=e(81961),l=e(62133),m=e(37911),d=e(4226),f=e(67294),x=e(86455),p=e.n(x),g=e(77044),h=e(57060),w=e(80109),v=e(38188),b=e(75276),S=e(90387);function _(n,t,e,r,o,i,c){try{var a=n[i](c),s=a.value}catch(u){return void e(u)}a.done?t(s):Promise.resolve(s).then(r,o)}function k(n){return function(){var t=this,e=arguments;return new Promise((function(r,o){var i=n.apply(t,e);function c(n){_(i,r,o,c,a,"next",n)}function a(n){_(i,r,o,c,a,"throw",n)}c(void 0)}))}}var C=!0;t.default=function(){var n=(0,s.Z)("mint-game"),t=n.t,e=n.lang,r=(0,c.pm)(),x=(0,S.useRouter)(),_=(0,g.Ge)().account,C=(0,h.Z)().onOpen,E=(0,v.s5)(),j=(0,f.useState)(),y=j[0],P=j[1],N=(0,f.useState)(),T=N[0],H=N[1],Z=function(){return _?T?"minting":"mint":"common:connect-wallet"},O=(0,f.useState)(Z()),A=O[0],B=O[1],D=k(o().mark((function n(i){var c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return console.log("submitHandler:txStatus.2",i),n.prev=1,n.next=4,E.lastGameMintOf(_);case 4:c=n.sent,console.log("submitHandler:txStatus.3",c,c.toString()),H(!1),p().fire({text:t("minting-ok",[c.toString()],!0),icon:"info",showCancelButton:!0,showConfirmButton:!0,cancelButtonText:t("common:cancel"),confirmButtonText:t("manage-nft")}).then((function(n){n.isConfirmed&&x.push(m.Z.localise("/game/?id=".concat(c.toString()),e))})),n.next=15;break;case 10:n.prev=10,n.t0=n.catch(1),console.log("submitHandler:txStatus.4",n.t0),H(!1),r({description:t("common:conn-error"),status:"error",duration:4e3,isClosable:!0});case 15:case"end":return n.stop()}}),n,null,[[1,10]])}))),G=k(o().mark((function n(e){var i,c;return o().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!T){n.next=2;break}return n.abrupt("return");case 2:return H(!0),n.prev=3,console.log("submitHandler:txStatus.111",T,Z()),n.next=7,E.mint(e.entryPrice,e.countDownDuration,e.ownerPercentage,e.primaryWinnerPercentage,e.secondaryWinnerPercentage);case 7:i=n.sent,P(i.hash),n.next=17;break;case 11:n.prev=11,n.t0=n.catch(3),c=n.t0.code,console.log("submitHandler:2",c,n.t0),H(!1),c!=u.O1.META_MASK_TX_DECLINED?r({description:t("common:conn-error"),status:"error",duration:4e3,isClosable:!0}):r({description:t("common:tx-declined"),status:"error",duration:4e3,isClosable:!0});case 17:case"end":return n.stop()}}),n,null,[[3,11]])}))),W=((0,w.k)(y,D,(function(){r({description:t("minting-failed"),status:"error",duration:4e3,isClosable:!0}),H(!1)})),(0,f.useState)()),X=W[0],M=W[1],I=(0,f.useState)(),R=I[0],z=I[1],K=function(n){_?G(n):(M(!0),z(n),C())};(0,f.useEffect)((function(){X&&_&&R&&(K(),M(!1)),B(Z())}),[_]),(0,f.useEffect)((function(){B(Z())}),[T]);return(0,i.jsx)(l.Z,{link:"/mint-game",title:t("title"),description:t("desc"),image:null,updatedTime:null,children:(0,i.jsx)(d.Z,{children:(0,i.jsx)(a.kC,{width:"full",align:"center",justifyContent:"center",alignItems:"center",children:(0,i.jsxs)(a.xu,{p:8,width:"550px",maxW:"100%",borderWidth:1,borderRadius:8,boxShadow:"lg",children:[(0,i.jsx)(a.xu,{textAlign:"center",children:(0,i.jsx)(a.X6,{fontSize:"18px",children:t("desc")})}),(0,i.jsx)(a.xu,{my:4,textAlign:"left",children:(0,i.jsx)(b.Z,{submitHandler:K,resetGetter:function(n){n},gameStyle:{"common:connect-wallet":"normal",mint:"normal",minting:"italic"}[A],gameStatus:A})})]})})})})}}},function(n){n.O(0,[868,827,607,612,455,921,409,680,276,774,888,179],(function(){return t=11537,n(n.s=t);var t}));var t=n.O();_N_E=t}]);